
function GenObj(){}
GenObj.prototype.setProp=function(prop,value){this[prop]=value;};GenObj.prototype.getProp=function(prop){return this[prop];};var omtrMapping={eventMapping:{cartView:'scView',cartRemove:'scRemove',cartAdd:'scAdd',checkout:'scCheckout',cartOpens:'scOpen',bookings:'purchase',purchaseRevenue:'purchaseRevenue',purchaseUnits:'purchaseUnits',flightSearch:'event1',tripOptions:'event2',viewSeats:'event3',logIns:'event4',logOuts:'event5',awardPnrs:'event6',awardPassengers:'event7',taxesAndFees:'event8',upgradePnrs:'event9',upgradeRevenue:'event10',upgradePassengers:'event11',flightChange:'event12',hotelSearch:'event13',hotelAddToCart:'event14',merchandisingUnits:'event15',merchandingOrders:'event16',merchandisingRevenue:'event17',carSearch:'event18',carAddToCart:'event19',OCIStart:'event20',OCIComplete:'event21',OnlineBagsCheckinComplete:'event22',OCIPassengersComplete:'event23',ancillarySearch:'event24',ancillaryAddToCart:'event25',buyGiftTransfer:'event26',DeltaPrivateJet:'event27',errorEvent:'event28',internalCampaignClickthrough:'event29',baggageRevenue:'event30',tripExtraPresented:'event31',tripExtraAddtoCart:'event32',tripExtraUnits:'event33',tripExtraOrders:'event34',tripExtraRevenue:'event35',skyMilesEnrollmentsCompletions:'event36',skyMilesUsed:'event37',searchSave:'event38',skyMilesLoginPage:'event39',emailEnrollments:'event40',skyMarkFormSubmission:'event41',skyBonusSignUp:'event42',skyBonusRedeem:'event43',skyBonusLogin:'event44',skyClubEnrollment:'event45',offerPresented:'event46',offerSelected:'event47',offerAccepted:'event48',needAssistanceSearch:'event49',eCertificateUnits:'event50',eCertificatePurchase:'event51',selectedFareDecontentedFareOffered:'event52',fareChangeError:'event53',fareChangeAmount:'event54',discountedPurchase:'event55',discountAmount:'event56',kenshooCost:'event57',emailInteractions:'event58',dfaViewThrough:'event59',dfaImpressions:'event60',dfaClicks:'event61',dfaTimeout:'event62',dfaMediaCost:'event63',livingSocialSignup:'event65',tripInsuranceQuotes:'event66',vacationCruiseSearch:'event69',rememberUser:'event70',skyBonusAddTicket:'event71',kenshooImpressions:'event72',kenshooClicks:'event73',kenshooCostDate:'event74',prodView:'prodView'},externalCampaignTrackingCodes:'campaign',internalCampaignTrackingCode:'eVar1',channelStacking:'eVar2',flightType:'eVar3',searchOriginCity:'eVar4',searchDestinationCity:'eVar5',cityPairs:'eVar6',awardVsRevenue:'eVar7',flowType:'eVar8',fareClass:'eVar9',searchOutboundDate:'eVar10',searchReturnDate:'eVar11',searchNumPassengers:'eVar12',upgradeOfferType:'eVar13',deepLinkFlightSearch:'eVar14',searchRefinement:'eVar15',platformType:'eVar16',formPayment:'eVar17',credCardCity:'eVar18',corporateID:'eVar19',countryAndLanguage:'prop16,eVar20',skyMilesMemType:'eVar21',skymilesMembNbr:'eVar22',newRepeatVisitor:'eVar23',currencyCode:'eVar24',promoCode:'eVar25',searchOutboundReturnSelection:'eVar26',partnerOffer:'eVar27',partnerCode:'eVar28',offerType:'eVar29',merchandisingStartDate:'prop54,eVar30',merchandisingEndDate:'eVar31',merchandisingNumberofPassengers:'eVar32',merchandisingTripDuration:'eVar33',merchandisingDaystoBooking:'eVar34',merchandisingMilesEarnedType:'eVar35',datalexTripId:'eVar36',fareType:'eVar37',searchUpgradedFareClass:'eVar38',fareChangeRange:'eVar39',fareBasisCode:'eVar40',bookingType:'evar41',loginMethod:'eVar42',geoSegmentation:'eVar43',buyGiftTransferType:'eVar44',payWithMilesSelection:'eVar45',ITATravelport:'eVar46',meetingDiscountPNRorOneClickPurchase:'eVar47',kenshooTrackingId:'eVar48',kenshooClickId:'eVar49',emailUnsubscribe:'eVar50',emailSubscribe:'eVar51',dfaClicks:'eVar52',dfaViewThrough:'eVar53',dfaTimeout:'eVar54',ChannelManagerKeywordStacking:'eVar55',ChannelManagerReferringDomain:'eVar56',tripInsuranceType:'eVar57',vacationOrigin:'eVar58',vacationDestination:'eVar59',vacationSearchPriceVsDeparture:'eVar60',cruiseType:'eVar61',flightDaysToBooking:'eVar62',EDPCodes:'eVar63',OASCCodes:'eVar64',OCIType:'eVar65',purchaseID:'purchaseID',state:'state',zip:'zip',contentInteraction:'prop1',contentInteractionLocation:'prop2',searchCabinFareClass:'prop3',flightSearchType:'prop4',flightSearchOutboundTime:'prop5',flightSearchReturnTime:'prop6',flightSearchOptions:'prop7',flightSearchMethod:'prop8',meetingDiscountCode:'prop9',saveToProfile:'prop10',rewardsProgramEntered:'prop11',knownTravelerOrRedressNumber:'prop12',specialServicesRequest:'prop13',hotelSearchBrandChainName:'prop14',merchandisingSearchOptions:'prop15',flightSearchFlightNumber:'prop17',flightSearchOnD:'prop18',errorTrackingListProp:'prop19',errorTracking:'prop20',internalSearchTerm:'prop21',searchResults:'prop22',bookingTypeOffered:'prop23',suggestedSearchLink:'prop24',internalCampaignImpression:'prop25',needAssistanceStatus:'prop26',skyClubSearchInputsAirports:'prop27',skyClubAddToExistingTime:'prop28',timeToCompleteCartAdd:'prop29',mileageCalculatorValues:'prop30',OCIMessages:'prop31',myTripsSearchType:'prop32',upsellPresented:'prop33',loggedInOutStatus:'prop34',CommentComplaintCategorySubcategory:'prop35',CommentOrComplaint:'prop36',eBPTag:'prop37',securedFlightStatus:'prop38',giftCharityMiles:'prop39',flightSearchResultsLocation:'prop40',livingSocialEmailSignUp:'prop41',cruiseSearchOptions:'prop42',loyaltyPromotionIDPresented:'prop43',loyaltyPromotionIDSignup:'prop44',IROPTypePresented:'prop45',IROPTypeClicked:'prop46',IROPTypeConfirmed:'prop47',formAbandonment:'prop48',loyaltyPromotionImpression:'prop49',cancelTripTypeProductPassengers:'prop50',cancelTripNavigation:'prop51',cancelTripMyTripsOrAutoRefund:'prop52',escapeMapClickShop:'prop53',countryCode:'prop55',IROPTimeToDeparture:'prop56',IROPScenario:'prop57',internalCampaignCarouselImpression:'prop58',siteSubsection:'prop59',pageName:'pageName',siteSection:'channel',server:'server',pageNotFound:'pageType',products:'products',hierarchy:'hier1'};function TrackingObject(){this.isDebugEnabled=false;this.oProps=new GenObj();this.mapping=null;this.products=[];this.events=[];this.fileSep=',';this.isResend=false;this.memberType="null";this.customLinkTrackTypes={general:"o",download:"d",exit:"e"};this.smLoginComponentWPErrorId="alerts_errors_dashboard";this.ociCheckinStatusId="checkin_status_cell_"
this.generalMemberType="General Member";this.isLoginByEmail=false;this.skyMilesLoginMethod="sky miles number";this.emailLoginMethod="email address";this.clickTrackingIntervalId=null;this.newsTeaserHtml="";this.fareTeaserHtml="";this.internalPromoTeaserHtml="";}
TrackingObject.prototype.logMessage=function(message){if(this.isDebugEnabled){DeltaUtils.logMessage(message);}}
TrackingObject.prototype.addHomePageInteractionTracking=function(){if(CustomerInfo.isLoggedIn()){$("#nav-widget-mydelta").on("click",function(){UserTracking.doCustomLinkTrack(s,{linkName:'hp:my delta'});});}else{$("#nav-widget-mydelta").on("click",function(){UserTracking.doCustomLinkTrack(s,{linkName:'hp:my trips'});});}
$("#nav-widget-booking").on("click",function(){UserTracking.doCustomLinkTrack(s,{linkName:'hp:book a trip'});});$("#book-hotel-content-trigger").on("click",function(){UserTracking.doCustomLinkTrack(s,{linkName:'hp:book a trip:hotel tab'});});$("#book-car-content-trigger").on("click",function(){UserTracking.doCustomLinkTrack(s,{linkName:'hp:book_a_trip:car tab'});});$("#book-air-content-trigger").on("click",function(){UserTracking.doCustomLinkTrack(s,{linkName:'hp:book a trip:flight tab'});});$("#nav-widget-status").on("click",function(){UserTracking.doCustomLinkTrack(s,{linkName:'hp:flight status'});});$("#nav-widget-checkin").on("click",function(){UserTracking.doCustomLinkTrack(s,{linkName:'hp:checkin'});});$("#nav-widget-escape").on("click",function(){UserTracking.doCustomLinkTrack(s,{linkName:'hp:escape'});});var $baggageLinks=$("#baggagefees p a");$baggageLinks.each(function(index){var hrefString=$(this).attr("href");if(hrefString.match(/checked/i)!=null){$(this).on("click",function(){UserTracking.doCustomLinkTrack(s,{linkName:'hp:baggage fees'});});}else if(hrefString.match(/optional-fees-services/i)!=null){$(this).on("click",function(){UserTracking.doCustomLinkTrack(s,{linkName:'hp:services fees'});});}});try{var $advisoryLinks=$("#advisory .detail-container a");$advisoryLinks.each(function(index){$(this).on("click",function(){var clickTrackValue="hp:"+$(this).attr("href").split("/").reverse()[0].split(".")[0].replace("-"," ");UserTracking.doCustomLinkTrack(s,{linkName:clickTrackValue});});});}catch(error){}
var $deltaAppContent=$(".mobile-apps .mobilePar div div p a");$deltaAppContent.each(function(){$(this).on("click",function(){UserTracking.doCustomLinkTrack(s,{linkName:'hp:fly delta app features'});});});var $mobileCalloutContent=$(".mobile-app-cta a.get-app");$mobileCalloutContent.each(function(){$(this).on("click",function(){UserTracking.doCustomLinkTrack(s,{linkName:'hp:get the fly delta app'});});});var $footerFacebookCallout=$(".facebook-like");$footerFacebookCallout.each(function(){$(this).on("click",function(){UserTracking.doCustomLinkTrack(s,{linkName:'hp:like us on facebook button footer section'});});});var $footerFacebookCallout=$("#follow-button");$footerFacebookCallout.each(function(){$(this).on("click",function(){UserTracking.doCustomLinkTrack(s,{linkName:'hp:follow delta twitter'});});});};TrackingObject.prototype.addTeaserInteractionTracking=function(){var $newsContent=$(".sub-content .primary .campaign .reference");var tempId;$newsContent.each(function(index){tempId="news-item-"+index;if(index==0){$(this).find("h2").prop("id",tempId);}else{$(this).find("h3").prop("id",tempId);}
if(index==0){$(this).find("a").on("click",function(){var storyLabel=$("#news-item-0").text();UserTracking.doCustomLinkTrack(s,{linkName:storyLabel});});}else if(index==1){$(this).find("a").on("click",function(){var storyLabel=$("#news-item-1").text();UserTracking.doCustomLinkTrack(s,{linkName:storyLabel});});}else if(index==2){$(this).find("a").on("click",function(){var storyLabel=$("#news-item-2").text();UserTracking.doCustomLinkTrack(s,{linkName:storyLabel});});}});var $fareSales=$(".sub-content .secondary .secondaryPar");var $fareSpecials=$(".featured .details .booknow a");$fareSpecials.each(function(index){if(index==0){$(this).on("click",function(){UserTracking.doCustomLinkTrack(s,{linkName:'hp:fare specials:view deals and offers'});});}else{$(this).on("click",function(){UserTracking.doCustomLinkTrack(s,{linkName:'hp:fare specials:view all deals'});});}});var $fareSaleItems=$fareSales.find(".smallhomepagedealteaser");$fareSaleItems.each(function(index){tempId="fare-sale-"+index;$(this).find("h2").prop("id",tempId);var $fareLinks=$(this).find("a");$fareLinks.each(function(itemIndex){if(index==0){$(this).on("click",function(){var fareLabel="hp:"+$("#fare-sale-0").text();UserTracking.doCustomLinkTrack(s,{linkName:fareLabel});});}else if(index==1){$(this).on("click",function(){var fareLabel="hp:"+$("#fare-sale-1").text();UserTracking.doCustomLinkTrack(s,{linkName:fareLabel});});}else if(index==2){$(this).on("click",function(){var fareLabel="hp:"+$("#fare-sale-2").text();UserTracking.doCustomLinkTrack(s,{linkName:fareLabel});});}});});var $internalPromos=$(".internal-promos a");$internalPromos.each(function(){if($(this).attr("class")=="mail"){$(this).on("click",function(){UserTracking.doCustomLinkTrack(s,{linkName:'hp:newsletter'});});}else if($(this).attr("class")=="skymiles"){$(this).on("click",function(){UserTracking.doCustomLinkTrack(s,{linkName:'hp:join skymiles'});});}});}
TrackingObject.prototype.addSWRInteractionTracking=function(){var $footer=$(".footerOptions a");$footer.each(function(index){var hrefString=$(this).attr("href");if(hrefString.match(/site/i)!=null){$(this).on("click",function(){UserTracking.doCustomLinkTrack(s,{linkName:'footer:site map'});});}else if(hrefString.match(/about/i)!=null){$(this).on("click",function(){UserTracking.doCustomLinkTrack(s,{linkName:'footer:about delta'});});}else if(hrefString.match(/business/i)!=null){$(this).on("click",function(){UserTracking.doCustomLinkTrack(s,{linkName:'footer:business programs'});});}else if(hrefString.match(/corporate/i)!=null){$(this).on("click",function(){UserTracking.doCustomLinkTrack(s,{linkName:'footer:corporate travel'});});}else if(hrefString.match(/agents/i)!=null){$(this).on("click",function(){UserTracking.doCustomLinkTrack(s,{linkName:'footer:travel agents'});});}else if(hrefString.match(/careers/i)!=null){$(this).on("click",function(){UserTracking.doCustomLinkTrack(s,{linkName:'footer:careers'});});}else if(hrefString.match(/security/i)!=null){$(this).on("click",function(){UserTracking.doCustomLinkTrack(s,{linkName:'footer:cookies privacy security'});});}else if(hrefString.match(/legal/i)!=null){$(this).on("click",function(){UserTracking.doCustomLinkTrack(s,{linkName:'footer:legal'});});}else if(hrefString.match(/blog/i)!=null){$(this).on("click",function(){UserTracking.doCustomLinkTrack(s,{linkName:'footer:blog'});});}else if(hrefString.match(/social/i)!=null){$(this).on("click",function(){UserTracking.doCustomLinkTrack(s,{linkName:'footer:social'});});}else if(hrefString.match(/mobile/i)!=null){$(this).on("click",function(){UserTracking.doCustomLinkTrack(s,{linkName:'footer:mobile app'});});}})
$("#OpinionLab a").on("click",function(){UserTracking.doCustomLinkTrack(s,{linkName:'footer:feedback'});});$("#utility-nav ul li.fb").on("click",function(){UserTracking.doCustomLinkTrack(s,{linkName:'header:facebook icon'});});$("#utility-nav ul li.twtr").on("click",function(){UserTracking.doCustomLinkTrack(s,{linkName:'header:twitter icon'});});$("#header-cart-link").on("click",function(){UserTracking.doInteractionTracking("cart:header","");});var $shopMenuLinks=$(".shop .dropdown ul li a");$shopMenuLinks.each(function(){var menuLink=$(this).attr("href");var sprop1Value;if(menuLink.match(/hotel/i)){$(this).on("click",function(sprop1Value){UserTracking.doInteractionTracking("hotels","");});}else if(menuLink.match(/cars/i)){$(this).on("click",function(sprop1Value){UserTracking.doInteractionTracking("cars","");});}});if(!DeltaUtils.isHomePage()){$("#nav-widget-need-help").on("click",function(){UserTracking.doInteractionTracking("need_help:widget","");});$("#needHelp-FindTab_trigger").on("click",function(){UserTracking.doInteractionTracking("need_help:find","");});$("#needHelp-TweetTab_trigger").on("click",function(){UserTracking.doInteractionTracking("need_help:tweet","");});$("#needHelp-CallTab_trigger").on("click",function(){UserTracking.doInteractionTracking("need_help:call","");});$("#needHelp-EmailTab_trigger").on("click",function(){UserTracking.doInteractionTracking("need_help:email","");});$("#yesFindInfo").on("click",function(){UserTracking.doFindHelpTracking(true);});$("#noFindInfo").on("click",function(){UserTracking.doFindHelpTracking(false);});}};TrackingObject.prototype.addClickTracking=function(){this.addSWRInteractionTracking();if(DeltaUtils.isHomePage()){this.addHomePageInteractionTracking();this.clickTrackingIntervalId=setTimeout(function(){if(UserTracking.newsTeaserHtml!=$("#_content_www_en_US_home_jcr_content_primaryPar_teaser").html()&&UserTracking.fareTeaserHtml!=$("#_content_www_en_US_home_jcr_content_secondaryPar_teaser_0").html()&&UserTracking.internalPromoTeaserHtml!=$("#_content_www_en_US_home_jcr_content_secondaryPar_teaser").html()){UserTracking.addTeaserInteractionTracking();}},3000);}};TrackingObject.prototype.checkEmailPrefs=function(checkedFieldName,unCheckedFieldName){var uri=this.getProp('uri');if(uri.toLowerCase()==='/customerprofile/servlet/contactme'&&document.contact_me){var checkBoxes=document.contact_me.RsnForCtacCd;var checkedBoxes=[];var unCheckedBoxes=[];for(var i=0,j=checkBoxes.length;i<j;i++){if(checkBoxes[i].checked){checkedBoxes.push(this.findEmailLongName(checkBoxes[i]));}else{unCheckedBoxes.push(this.findEmailLongName(checkBoxes[i]));}}
var CheckedInput=this.createElement({elementType:'input',type:'hidden',name:checkedFieldName,id:checkedFieldName,value:checkedBoxes.join(this.fileSep)});document.contact_me.appendChild(CheckedInput);var UnCheckedInput=this.createElement({elementType:'input',type:'hidden',name:unCheckedFieldName,id:unCheckedFieldName,value:unCheckedBoxes.join(this.fileSep)});document.contact_me.appendChild(UnCheckedInput);}};TrackingObject.prototype.checkSkyMilesLogin=function(){this.setLoggedInStatus();this.setLoyaltyId();this.setSkyMilesType();};TrackingObject.prototype.clearProps=function(trackingObj){if(DeltaUtils.exists(this.mapping)){for(var prop in this.mapping){if(typeof(this.mapping[prop])==='string'&&DeltaUtils.exists(this.oProps.getProp(prop))&&this.oProps.getProp(prop)!==''){var Options=this.mapping[prop].split(',');for(var i=0,j=Options.length;i<j;i++){trackingObj[Options[i]]="";}}}}
var pageName=this.getProp("pageName");trackingObj.events="";trackingObj.products="";this.oProps=null;this.oProps=new GenObj();this.products=[];this.events=[];this.setPageName(pageName);};TrackingObject.prototype.createElement=function(Definition){var element=document.createElement(Definition.elementType);element.setAttribute('name',Definition.name);element.setAttribute('id',Definition.id);if(Definition.type){element.setAttribute('type',Definition.type);}
if(Definition.value){element.setAttribute('value',Definition.value);}
return element;};TrackingObject.prototype.customInteraction=function(contentInteraction,contentInteractionLocation){this.isResent=true;this.setProp({prop:"contentInteraction",value:contentInteraction});this.setProp({prop:"contentInteractionLocation",value:contentInteractionLocation})
this.setTrackingVariables(s);this.clearProps(s);};TrackingObject.prototype.doCustomLinkTrack=function(trackingObject,Definition){if(DeltaUtils.exists(trackingObject)&&typeof(trackingObject)==="object"){trackingObject.tl(true,(DeltaUtils.exists(Definition.customLinkTrackType)?Definition.customLinkTrackType:UserTracking.customLinkTrackTypes.general),(DeltaUtils.exists(Definition.linkName)?Definition.linkName:UserTracking.getProp('pageName')+" Unspecified Custom Link"));trackingObject.linkTrackVars="";}};TrackingObject.prototype.doFindHelpTracking=function(success){this.isResent=true;if(success){this.setProp({prop:"needAssistanceStatus",value:"found"});}else{var notFoundString="not found:"+$("#findHelp").val();this.setProp({prop:"needAssistanceStatus",value:notFoundString});}
this.setTrackingVariables(s);this.clearProps(s);};TrackingObject.prototype.doHoldTicketPurchase=function(Definition){this.logEvent('bookings','holdTicketPurch');this.products.push(';'+Definition.ticketType+'-'+Definition.flightType+'-'+this.returnFlightString(Definition)+';'+Definition.numberTix+';'+Definition.totalCost+';event8='+Definition.taxesAndFees+'|event37='+Definition.skyMilesUsed);};TrackingObject.prototype.doInteractionTracking=function(contentInteraction,contentInteractionLocation){if(contentInteractionLocation==""||contentInteractionLocation==undefined){if(this.getProp("pageName")!=null&&this.getProp("pageName")!=""){contentInteractionLocation=this.getProp("pageName")}else if(s.pageName!=null&&s.pageName!=""){contentInteractionLocation=s.pageName;}else{}}
UserTracking.customInteraction(contentInteraction,contentInteractionLocation);};TrackingObject.prototype.doOCIBags=function(Definition){this.logEvent('bookings','OnlineBagsCheckinComplete');this.products.push(';Bags Check-in;'+Definition.numberBags+';'+Definition.totalCost);};TrackingObject.prototype.doProductView=function(Definition){this.logEvent('prodView');switch(Definition.prodType.toLowerCase()){case'hotel':this.products.push('HO-'+Definition.brand);break;}};TrackingObject.prototype.doScAddEvent=function(Definition){this.logEvent('cartAdd','cartView');switch(Definition.prodType.toLowerCase()){case'flight':this.products.push(';'+Definition.ticketType+'-'+Definition.flightType+'-'+this.returnFlightString(Definition)+';;;');break;case'carrental':this.products.push(';CA-'+Definition.destinationCity.split(',')[0]+'-'+Definition.brand+'-'+Definition.type);break;case'hotel':this.products.push(';HO-'+Definition.destinationCity.split(',')[0]+'-'+Definition.brand);break;case'insurance':this.products.push(';TI-'+Definition.destinationCity.split(',')[0]+';'+Definition.passengers+';'+Definition.insurance.total);break;case'dsp':this.products.push(';AM-'+Definition.originCity.split(',')[0]+'-'+Definition.destinationCity.split(',')[0]);break;}};TrackingObject.prototype.doScCheckout=function(Definition){this.logEvent('checkout');this.products.push(';'+Definition.ticketType+'-'+Definition.flightType+'-'+this.returnFlightString(Definition)+';;;');if(DeltaUtils.exists(Definition.hotel)){this.products.push(';HO-'+Definition.destinationCity+'-'+Definition.hotel.brand);}
if(DeltaUtils.exists(Definition.carRental)){this.products.push(';CA-'+Definition.destinationCity+'-'+Definition.carRental.brand+'-'+Definition.carRental.type);}
if(DeltaUtils.exists(Definition.insurance)){this.products.push(';TI-'+Definition.destinationCity+';'+Definition.passengers+';'+Definition.insurance.total);}};TrackingObject.prototype.doAwardsPurchase=function(Definition){this.logEvent('bookings','taxesAndFees','skyMilesUsed','awardTickets','awardPnrs');this.products.push('awards-'+Definition.flightType+'-'+this.returnFlightString(Definition)+';'+Definition.numberTix+';'+Definition.totalCost+'event8='+Definition.taxesAndFees+'|event6='+Definition.awardPnrs+'|event37='+Definition.skyMilesUsed);if(DeltaUtils.exists(Definition.hotel)){this.products.push(';HO-'+Definition.destinationCity+'-'+Definition.hotel.brand+';'+Definition.hotel.numberNights+';'+Definition.hotel.cost);}
if(DeltaUtils.exists(Definition.carRental)){this.products.push(';CA-'+Definition.destinationCity+'-'+Definition.carRental.brand+'-'+Definition.carRental.type+';'+Definition.carRental.numberDays+';'+Definition.carRental.cost);}
if(DeltaUtils.exists(Definition.insurance)){this.products.push(';TI-'+Definition.destinationCity+';'+Definition.passengers+';'+Definition.insurance.total);}};TrackingObject.prototype.findEmailLongName=function(Node){while(Node.nextSibling){var NextSibling=Node.nextSibling;if(NextSibling.getElementsByTagName&&DeltaUtils.exists(NextSibling.getElementsByTagName('a'))){var returnText=stripHTML(NextSibling.getElementsByTagName('a')[0].innerHTML);return returnText;}else{return this.findEmailLongName(NextSibling);}}};TrackingObject.prototype.findPageName=function(){var uri=this.getProp('uri').toLowerCase();switch(true){case uri==='/':case uri==='':case uri==='/index.jsp':case uri==='/dlhome/index.jsp':case uri=='/content/www/en_US/home.html':return'Home Page';break;case uri==='/help/site_map/':return'Site Map';default:return uri;}};TrackingObject.prototype.findQSParamValue=function(param){if(!DeltaUtils.exists(this.getProp('queryString'))){return'';}
var QSQuery=new RegExp('[?&]'+param+'=([^&$]*)','i');return(this.getProp('queryString').search(QSQuery)>=0)?RegExp.$1:'';};TrackingObject.prototype.flowTypeConstants=function(flowTypeString){var flowTypes={'mytrips':'My Trips','oci':'OCI','shopping':'Air-shopping','mydelta':'My Delta','loyalty':'Loyalty','merchandising':'Merchandising'}
return flowTypes[flowTypeString];};TrackingObject.prototype.getCityPairs=function(){var searchOriginCity=(DeltaUtils.exists(this.getProp('searchOriginCity')))?this.getProp('searchOriginCity'):'';var searchDestinationCity=(DeltaUtils.exists(this.getProp('searchDestinationCity')))?this.getProp('searchDestinationCity'):'';var originCities=searchOriginCity.split(',');var destinationCity=searchDestinationCity.split(',');if(originCities.length===destinationCity.length){var cityPairs=[];for(i=0,j=originCities.length;i<j;i++){cityPairs.push(originCities[i]+'-'+destinationCity[i]);}
if(cityPairs.length>1){this.setProp({prop:'multiCityflights',value:cityPairs.length});}
return cityPairs.join('-');}else{return searchOriginCity+'-'+searchDestinationCity;}};TrackingObject.prototype.getByClassName=function(Definition){var ClassTest=new RegExp('(^|\s)'+Definition.className.replace(/\-/g,'\\-')+'(\s|$)','i');var tagName='';var testElements;if(DeltaUtils.exists(Definition.tagName)){switch(typeof Definition.tagName){case'object':var testElements=[];var RootElement=(DeltaUtils.exists(Definition.startElem))?Definition.startElem:document;for(var i=0,j=Definition.tagName.length;i<j;i++){var childElements=RootElement.getElementsByTagName(Definition.tagName[i]);for(var k=0,l=childElements.length;k<l;k++){testElements.push(childElements[k]);}
testElements.push(RootElement.getElementsByTagName(Definition.tagName[i]));}
break;default:testElements=(DeltaUtils.exists(Definition.startElem))?Definition.startElem.getElementsByTagName(Definition.tagName):document.getElementsByTagName(Definition.tagName);break;}}else{testElements=(DeltaUtils.exists(Definition.startElem))?Definition.startElem.getElementsByTagName('*'):document.getElementsByTagName('*');}
var matchingElements=[];for(var i=0,j=testElements.length;i<j;i++){if(ClassTest.test(testElements[i].className)){if(DeltaUtils.exists(Definition.childTagName)){var childElements=testElements[i].getElementsByTagName(Definition.childTagName);for(var k=0,l=childElements.length;k<l;k++){matchingElements.push(childElements[k]);}}else{matchingElements.push(testElements[i]);}}}
return matchingElements;};TrackingObject.prototype.getOriginAndDestination=function(){var searchOriginCity=(DeltaUtils.exists(this.getProp('searchOriginCity')))?this.getProp('searchOriginCity'):'';var searchDestinationCity=(DeltaUtils.exists(this.getProp('searchDestinationCity')))?this.getProp('searchDestinationCity'):'';var originCities=searchOriginCity.split(',');var destinationCity=searchDestinationCity.split(',');if(originCities.length===destinationCity.length){var cityPairs=[];for(i=0,j=originCities.length;i<j;i++){cityPairs.push(originCities[i]+'-'+destinationCity[i]);}
if(cityPairs.length>1){this.setProp({prop:'multiCityflights',value:cityPairs.length});}
return originCities[0]+'-'+destinationCity[destinationCity.length-1];}else{return searchOriginCity+'-'+searchDestinationCity;}};TrackingObject.prototype.getPageErrors=function(){var rows=this.getByClassName({className:'cpyError',tagName:['td','span']});var errors=[];var errorsString='';for(var i=0,j=rows.length;i<j;i++){if(rows[i].style.display.toLowerCase()!=='none'){errors.push(rows[i].innerHTML.replace(/\n/g,' '));}}
rows=this.getByClassName({className:'error',tagName:'div'});for(var i=0,j=rows.length;i<j;i++){var logError=(DeltaUtils.exists(rows[i].parentNode)&&rows[i].parentNode.id===this.smLoginComponentWPErrorId)||rows[i].style.display.toLowerCase()==='none'||(rows[i].parentNode.id.match(this.ociCheckinStatusId)&&!rows[i].parentNode.className.match("error"))?false:true;if(logError){errors.push(rows[i].innerHTML.replace(/\n/g,' '));}}
if(errors.length>0){var errorString=trimString(stripHTML(errors.join('|'))).substr(0,100);this.setProp({prop:'errorCodes',value:errorString});}
return errorsString;};TrackingObject.prototype.getProp=function(prop){var rtn=this.oProps.getProp(prop);return rtn;};TrackingObject.prototype.getSearchType=function(){switch(true){case this.getProp('uri').substr(0,8)=='/awards/':return'Award Ticket Search';default:return'Simple Search';}};TrackingObject.prototype.logEvent=function(events){for(var i=0,j=arguments.length;i<j;i++){this.events.push(arguments[i]);}};TrackingObject.prototype.readCookie=function(name){var oRegExp=new RegExp(name+'=([\\w]*)','i');var Match=oRegExp.exec(document.cookie);if(Match!==null&&Match.length>1){return unescape(Match[1]);}
return'';};TrackingObject.prototype.returnArrayDifferences=function(LongerArray,ShorterArray){var difs=[];LongerArray.sort();ShorterArray.sort();for(var i=0,j=LongerArray.length;i<j;i++){var x=ShorterArray.length-1;var useValue=true;while(x>=0){if(ShorterArray[x].toLowerCase()===LongerArray[i].toLowerCase()){useValue=false;x=-1;}
x--;}
if(useValue){difs.push(LongerArray[i]);}}
return difs.join(',');};TrackingObject.prototype.returnFlightString=function(Definition){var originFlights=Definition.originCity.split(','),destinationFlights=Definition.destinationCity.split(',');if(Definition.flightType.toLowerCase()==='multicity'){var flights=[];for(var i=0,j=originFlights.length;i<j;i++){flights.push(originFlights[i]+'-'+destinationFlights[i]);}
return originFlights[0]+'-'+destinationFlights[originFlights.length-1];}
return originFlights[0]+'-'+destinationFlights[0];};TrackingObject.prototype.setChannel=function(){var uri=this.getProp('uri').toLowerCase();uri=uri.substring(0,(uri.lastIndexOf('/'))+1);this.setProp({prop:'siteSection',value:uri});};TrackingObject.prototype.setCountryLanguage=function(){var languageSettings;if(CustomerInfo.isAuthenticated()||CustomerInfo.isLoggedIn()){var language=(CustomerInfo.getLanguage()!=null&&CustomerInfo.getLanguage()!="")?CustomerInfo.getLanguage():"en";var country=(CustomerInfo.getCountry()!=null&&CustomerInfo.getCountry()!="")?CustomerInfo.getCountry():"us";languageSettings=country+":"+language;}else{languageSettings=CookieUtils.get("MP_COUNTRY")+":"+CookieUtils.get("MP_LANG");}
this.setProp({prop:'countryAndLanguage',value:(DeltaUtils.exists(languageSettings)?languageSettings.replace("-",":"):"us:en")});};TrackingObject.prototype.setCurrencyCode=function(currency){if(arguments[0]){if(arguments[0]!=='USD'){var convertCodes={RON:'ROL',IDR:'JOD',TDY:'TRL'};this.setProp({prop:'currencyCode',value:(!DeltaUtils.exists(convertCodes[arguments[0]])?arguments[0]:convertCodes[arguments[0]])});}}else{if(s.currencyCode){}}};TrackingObject.prototype.setEvents=function(){var uri=this.getProp('uri');switch(uri){case'/skymilesenrollment/skymiles/enrollment/index.jsp':this.logEvent('skyMilesEnrollStart');this.setProp({prop:'pageName',value:'Start Skymiles Enrollment'});break;case'/cancelawardticket/skymiles/awards/cancelConfirm/index.jsp':this.logEvent('redepositUnused');break;}};TrackingObject.prototype.setFormTracking=function(trackingObject){var currentForms=getByTagName('form');var formList=[];var doTrackForms=false;if(currentForms.length>0){doTrackForms=true;for(var i=0,j=currentForms.length;i<j;i++){if(DeltaUtils.exists(currentForms[i].name)){formList.push(currentForms[i].name);}}}
trackingObject.formList=formList.join(',');trackingObject.trackFormList=doTrackForms;};TrackingObject.prototype.setGeneralProps=function(){var QSValue=this.findQSParamValue('displayMethod');if(QSValue.toLowerCase()==='dostartover'){this.setProp({prop:'startOverButton',value:'Purchase Start Over'});}
QSValue=this.findQSParamValue('EventId');if(QSValue.toLowerCase()==='process_start_over'){this.setProp({prop:'startOverButton',value:'Award Start Over'});}
QSValue=this.findQSParamValue('t_cc');if(QSValue!=='null'&&QSValue.length>0){this.setProp({prop:'internalCampaigns',value:QSValue});}};TrackingObject.prototype.setHierarchy=function(){var uri=this.getProp('uri').toLowerCase();var hierarchy='';hierarchy=uri.replace(/\//g,':');hierarchy=hierarchy.substring(hierarchy.indexOf(':')+1,hierarchy.lastIndexOf(':'));this.setProp({prop:'hierarchy',value:hierarchy});};TrackingObject.prototype.setLoggedInStatus=function(){var loggedInOutStatus;if(CustomerInfo.custData!=null){loggedInOutStatus=(CustomerInfo.isLoggedIn())?"logged in":"logged out";this.setProp({prop:"loggedInOutStatus",value:loggedInOutStatus});}else{try{if(DeltaUtils.exists(loginData)){loggedInOutStatus=(loginData.loggedIn)?"logged in":"logged out";this.setProp({prop:"loggedInOutStatus",value:loggedInOutStatus});}}catch(error){this.setProp({prop:"loggedInOutStatus",value:"logged out"});}}}
TrackingObject.prototype.setLoyaltyId=function(){var loyaltyId="";if(CustomerInfo.isInitialized){loyaltyId=CustomerInfo.getSkyMilesNumber()}else{try{if(DeltaUtils.exists(loginData)){loyaltyId=loginData.smNumber;}}catch(error){}}
if(loyaltyId!=""){this.setProp({prop:'loyaltyId',value:loyaltyId});}};TrackingObject.prototype.setPageName=function(){if(!DeltaUtils.exists(this.getProp('pageName'))){if(arguments[0]){this.setProp({prop:'pageName',value:arguments[0]});}else{try{if(s.pageName){this.setProp({prop:'pageName',value:s.pageName});}else{var uri=this.getProp('uri');var pageNameToSet=this.findPageName();if(pageNameToSet.toLowerCase()===uri.toLowerCase()){var elements=$("#ContentContainer h1").html();pageNameToSet=(elements!=null&&elements.length>=1)?elements:uri;}
this.setProp({prop:'pageName',value:pageNameToSet});}}catch(error){var uri=this.getProp('uri');var pageNameToSet=this.findPageName();if(pageNameToSet.toLowerCase()===uri.toLowerCase()){var elements=$("#ContentContainer h1").html();pageNameToSet=(elements!=null&&elements.length>=1)?elements:uri;}
this.setProp({prop:'pageName',value:pageNameToSet});}}}};TrackingObject.prototype.setProp=function(){for(var i=0,j=arguments.length;i<j;i++){if(typeof(arguments[i])==='object'&&DeltaUtils.exists(arguments[i].prop)&&DeltaUtils.exists(arguments[i].value)&&arguments[i].value!=''){var prop=arguments[i].prop;var value=arguments[i].value;switch(true){case(prop==='searchOriginCity'||prop==='searchDestinationCity')&&DeltaUtils.exists(this.getProp('flightSearchType'))&&this.getProp('flightSearchType').toLowerCase()!=='multicity':value=value.split(',')[0];break;case(prop==='pageName'&&value==='Awards: Select outbound flight'):this.logEvent('flightSearch');break;case prop==='setOutboundTime':prop='searchOutboundTime';value=value.split(',')[0];break;case prop==='setReturnTime':prop='searchReturnTime';var timeList=value.split(',');value=timeList[timeList.length-1];break;}
this.oProps.setProp(prop,value);if(DeltaUtils.exists(this.mapping)&&DeltaUtils.exists(this.mapping.eventMapping[prop])){this.logEvent(prop);}}}};TrackingObject.prototype.setQueryString=function(){var queryString='';var queryString=(window.location.href.lastIndexOf('?')===-1)?'':window.location.href.substr(window.location.href.lastIndexOf('?')).split('#')[0];if(queryString.indexOf('=')===-1){queryString='';}
this.setProp({prop:'queryString',value:queryString});};TrackingObject.prototype.setServer=function(){this.setProp({prop:'server',value:window.location.host.toString().split('.')[0]});};TrackingObject.prototype.setSiteSubsection=function(){if(arguments[0]){var subsection=this.getProp("siteSection")+":"+arguments[0];this.setProp({prop:'siteSubsection',value:subsection});}else{}}
TrackingObject.prototype.setSkyMilesType=function(param){if(CustomerInfo.isInitialized&&CustomerInfo.isLoggedIn()&&CustomerInfo.getMedallionMemberDescription()!==null&&CustomerInfo.getMedallionMemberDescription()!=""){this.setProp({prop:'skyMilesMemType',value:CustomerInfo.getMedallionMemberDescription()});}else if(CustomerInfo.isInitialized&&CustomerInfo.isLoggedIn()&&CustomerInfo.isSkyMilesMember()){this.setProp({prop:'skyMilesMemType',value:this.generalMemberType});}};TrackingObject.prototype.setSubscribeUnubscribe=function(currentChecked,currentUnChecked,prevChecked,prevUnChecked){var enrollEmails='',unsubscribeEmails='',toolOne='',toolTwo='';this.setProp('emailPreferencesChecked',currentChecked);this.setProp('emailPreferencesUnsubscribe',currentUnChecked);if(currentChecked!==''&&currentChecked.length>prevChecked.length){enrollEmails=this.returnArrayDifferences(currentChecked.split(this.fileSep),prevChecked.split(this.fileSep));if(enrollEmails!==''){toolOne='Email Update';}}
if(currentUnChecked!==''&&currentUnChecked.length>prevUnChecked.length){unsubscribeEmails=this.returnArrayDifferences(currentUnChecked.split(this.fileSep),prevUnChecked.split(this.fileSep));if(unsubscribeEmails!==''){toolTwo='Email Update';}}
this.setProp({prop:'emailPreferencesChecked',value:currentChecked},{prop:'emailPreferencesUnsubscribe',value:currentUnChecked},{prop:'emailEnrollments',value:enrollEmails},{prop:'emailUnsubscribe',value:unsubscribeEmails},{prop:'skyMilesToolsUsed',value:toolOne},{prop:'skyMilesToolsUsed',value:toolTwo});};TrackingObject.prototype.setTrackingVariables=function(trackingObject){if(DeltaUtils.exists(this.mapping)){for(var prop in this.mapping){if(typeof(this.mapping[prop])==='string'&&DeltaUtils.exists(this.oProps.getProp(prop))&&this.oProps.getProp(prop)!==''){var Options=this.mapping[prop].split(',');for(var i=0,j=Options.length;i<j;i++){switch(true){case(prop==='searchOriginCity'||prop==='searchDestinationCity')&&DeltaUtils.exists(this.getProp('flightSearchType'))&&this.getProp('flightSearchType').toLowerCase()==='multicity':trackingObject[Options[i]]=(prop==='searchOriginCity')?this.oProps.getProp(prop).split(',')[0]:this.oProps.getProp(prop).split(',')[this.oProps.getProp(prop).split(',').length-1];break;default:trackingObject[Options[i]]=this.oProps.getProp(prop);}}}}
if(this.events.length>0){var usedEvents=[];var EventHash={};for(var i=0,j=this.events.length;i<j;i++){if(!DeltaUtils.exists(EventHash[this.events[i]])){if(DeltaUtils.exists(this.mapping.eventMapping[this.events[i]])){usedEvents.push(this.mapping.eventMapping[this.events[i]]);}
EventHash[this.events[i]]=true;}}
if(usedEvents.length>0){trackingObject.events=usedEvents.join(',');}}
if(this.products.length>0){trackingObject.products=this.products.join(',;');}
if(this.isResend){void(trackingObject.t());}
this.isResend=true;}};TrackingObject.prototype.setURI=function(){var URIBegin=window.location.href.lastIndexOf('.delta.com')+10;var URIEnd=(window.location.href.lastIndexOf('?')>URIBegin)?window.location.href.lastIndexOf('?'):window.location.href.length;var URI=window.location.href.substring(URIBegin,URIEnd);this.setProp({prop:'uri',value:URI});};TrackingObject.prototype.init=function(mappingObject){this.mapping=mappingObject;this.setURI();this.setQueryString();this.setChannel();this.setHierarchy();this.setSiteSubsection();this.setServer();this.setCountryLanguage();this.setEvents();this.setGeneralProps();this.setProp({prop:"platformType",value:"delta.com"});this.checkSkyMilesLogin();this.setCurrencyCode();$(document).ready(function(){UserTracking.addClickTracking();});};var UserTracking=new TrackingObject();$(document).ready(function(){var isCQPage=false
var path=window.location.pathname;var pathParts=path.split("/");for(var i=0;i<pathParts.length;i++){if(pathParts[i].match(/content/i)){isCQPage=true;}}
if(DeltaUtils.isHomePage()||isCQPage){UserTracking.mapping=omtrMapping;UserTracking.setURI();UserTracking.checkSkyMilesLogin();UserTracking.setCountryLanguage();UserTracking.addClickTracking();}});