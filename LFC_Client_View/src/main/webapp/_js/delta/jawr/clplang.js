
var welcome_arr=Array();welcome_arr['en']='WELCOME';welcome_arr['es']='BIENVENIDO';welcome_arr['de']='WILLKOMMEN';welcome_arr['fr']='BIENVENUE';welcome_arr['it']='BENVENUTO';welcome_arr['ja']='\u3088\u3046\u3053\u305D';welcome_arr['ko']='\uD658\uC601\uD569\uB2C8\uB2E4';welcome_arr['pt']='BEM-VINDO';welcome_arr['ru']='\u0414\u041E\u0411\u0420\u041E \u041F\u041E\u0416\u0410\u041B\u041E\u0412\u0410\u0422\u042C';welcome_arr['zt']='\u6B61\u8FCE';welcome_arr['zh']='\u6B22\u8FCE';var selCountryLan_arr=Array();selCountryLan_arr['en']='PLEASE SELECT YOUR COUNTRY & LANGUAGE';selCountryLan_arr['zh']='\u8BF7\u9009\u62E9\u60A8\u6240\u5728\u7684\u56FD\u5BB6\u53CA\u6240\u4F7F\u7528\u7684\u8BED\u8A00';selCountryLan_arr['ko']='\uAD6D\uAC00\uC640 \uC5B8\uC5B4\uB97C \uC120\uD0DD\uD574\uC8FC\uC2ED\uC2DC\uC624';selCountryLan_arr['pt']='SELECIONE SEU PA\u00CDS E IDIOMA';selCountryLan_arr['fr']='VEUILLEZ SELECTIONNER VOTRE PAYS ET VOTRE LANGUE';selCountryLan_arr['ru']='\u0412\u042B\u0411\u0415\u0420\u0418\u0422\u0415 \u0421\u0422\u0420\u0410\u041D\u0423 \u0418 \u042F\u0417\u042B\u041A';selCountryLan_arr['es']='SELECCIONE SU PA\u00CDS E IDIOMA';selCountryLan_arr['ja']='\u56FD\u3068\u8A00\u8A9E\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044';selCountryLan_arr['de']='BITTE W\u00C4HLEN SIE IHR LAND UND IHRE SPRACHE';selCountryLan_arr['it']='SELEZIONARE IL PAESE E LA LINGUA';selCountryLan_arr['zt']='\u8ACB\u9078\u64C7\u60A8\u7684\u570B\u5BB6\u548C\u8A9E\u8A00';var currSetting_arr=Array();currSetting_arr['en']='Is this the current setting for you?';currSetting_arr['zh']='\u8FD9\u662F\u60A8\u7684\u5F53\u524D\u8BBE\u7F6E\u5417\u003F';currSetting_arr['ko']='\uC774\uAC83\uC774 \uACE0\uAC1D\uB2D8\uC5B4 \uD604\uC7AC \uC124\uC815\uC778\uAC00\uC694\u003F';currSetting_arr['pt']='Esta \u00E9 a atual configura\u00E7\u00E3o para voc\u00EA\u003F';currSetting_arr['fr']='Ces param\u00E8tres correspondent-ils \u00E0 votre situation&nbsp;\u003F';currSetting_arr['ru']='\u042D\u0442\u043E \u0412\u0430\u0448\u0430 \u0442\u0435\u043A\u0443\u0449\u0430\u044F \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430\u003F';currSetting_arr['es']='\u00BFEs esta su configuraci\u00F3n actual\u003F';currSetting_arr['ja']='\u3053\u308C\u306F\u73FE\u5728\u767B\u9332\u3055\u308C\u3066\u3044\u308B\u8A2D\u5B9A\u3067\u3059\u304B\u003F';currSetting_arr['de']='Ist dies dies Ihre aktuelle Einstellung?';currSetting_arr['it']='\u00C8 questa la tua configurazione attuale?';currSetting_arr['zt']='\u9019\u662F\u60A8\u7684\u76EE\u524D\u8A2D\u5B9A\u55CE\u003F';var yes_arr=Array();yes_arr['en']='YES';yes_arr['zh']='\u662F';yes_arr['ko']='\uB124 ';yes_arr['pt']='SIM';yes_arr['fr']='OUI';yes_arr['ru']='\u0414\u0410';yes_arr['es']='S\u00CD';yes_arr['ja']='\u306F\u3044';yes_arr['de']='JA';yes_arr['it']='S\u00CC';yes_arr['zt']='\u662F';var profmsg_arr=Array();profmsg_arr['en']='You have selected language different from your <a href="/profile/index.action">Delta Profile</a> preferences.';profmsg_arr['zh']='\u60A8\u9009\u62E9\u7684\u8BED\u8A00\u4E0D\u540C\u4E8E\u60A8\u5728<a href="/profile/index.action">\u8FBE\u7F8E\u8D44\u6599\u5E93</a>\u4E2D\u7684\u504F\u597D\u8BBE\u7F6E\u3002';profmsg_arr['ko']='\uACE0\uAC1D\uB2D8\uC740 <a href="/profile/index.action">\uB378\uD0C0 \uACE0\uAC1D\uC815\uBCF4</a>\uC5D0 \uC788\uB294 \uC120\uD638 \uC5B8\uC5B4\uC640 \uB2E4\uB978 \uC5B8\uC5B4\uB97C \uC120\uD0DD\uD558\uC168\uC2B5\uB2C8\uB2E4.';profmsg_arr['pt']='Voc\u00EA selecionou um idioma diferente do seu <a href="/profile/index.action">Perfil da Delta </a>prefer\u00EAncias.';profmsg_arr['fr']='Vous avez choisi une langue diff\u00E9rente de celle d\u00E9finie dans les pr\u00E9férences de votre <a href="/profile/index.action">Profil Delta</a>.';profmsg_arr['ru']='\u0412\u044B \u0432\u044B\u0431\u0440\u0430\u043B\u0438 \u044F\u0437\u044B\u043A, \u043E\u0442\u043B\u0438\u0447\u043D\u044B\u0439 \u043E\u0442 \u0443\u043A\u0430\u0437\u0430\u043D\u043D\u043E\u0433\u043E \u0432 \u043F\u0440\u0435\u0434\u043F\u043E\u0447\u0442\u0435\u043D\u0438\u044F\u0445 " 041F 0440 043E 0444 0438 043B 044C Delta"';profmsg_arr['es']='Seleccion\u00F3 un idioma diferente al de sus preferencias en el <a href="/profile/index.action">Perfil de Delta</a>';profmsg_arr['ja']='<a href="/profile/index.action">\u30D7\u30ED\u30D5\u30A3\u30FC\u30EB</a>\u306E\u8A2D\u5B9A\u3068\u7570\u306A\u308B\u8A00\u8A9E\u304C\u9078\u629E\u3055\u308C\u307E\u3057\u305F\u3002';profmsg_arr['de']='Sie haben eine Sprache ausgesucht, die von den Pr\u00E4ferenzen in Ihrem <a href="/profile/index.action"> Delta-Profil</a> abweicht.';profmsg_arr['it']='Hai selezionato una lingua diversa da quella indicata nelle preferenze del tuo <a href="/profile/index.action">Profilo Delta</a>.';profmsg_arr['zt']='\u60A8\u5DF2\u9078\u64C7\u4E0D\u540C\u65BC\u60A8\u7684<a href="/profile/index.action">\u9054\u7F8E\u500B\u4EBA\u6A94\u6848</a>\504F\597D\8A2D\5B9A\4E2D\7684\8A9E\8A00\3002';var profconf_arr=Array();profconf_arr['en']='Do you want to save this change to your profile?';profconf_arr['zh']='\u60A8\u662F\u5426\u5E0C\u671B\u5C06\u6B64\u9879\u66F4\u6539\u4FDD\u5B58\u81F3\u60A8\u7684\u8D44\u6599\u5E93\uFF1F';profconf_arr['ko']='\uACE0\uAC1D\uB2D8\uC5B4 \uD504\uB85C\uD544\uC815\uBCF4\uC5D0 \uC774 \uBCC0\uACBD\uC0AC\uD56D\uC744 \uC800\uC7A5\uD558\uACE0 \uC2F6\uC73C\uC2E0\uAC00\uC694\u003F';profconf_arr['pt']='Deseja salvar isso em seu perfil\u003F';profconf_arr['fr']='D\u00E9sirez-vous sauvegarder ces changements dans votre profil&nbsp;\u003F';profconf_arr['ru']='\u0412\u044B \u0445\u043E\u0442\u0438\u0442\u0435 \u0441\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u044D\u0442\u0438 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u0432 \u0441\u0432\u043E\u0435\u043C \u043F\u0440\u043E\u0444\u0438\u043B\u0435\u003F';profconf_arr['es']='\u00BFDesea guardar este cambio en su perfil\u003F';profconf_arr['ja']='\u3053\u306E\u5909\u66F4\u3092\u30D7\u30ED\u30D5\u30A3\u30FC\u30EB\u306B\u4FDD\u5B58\u3057\u307E\u3059\u304B\uFF1F';profconf_arr['de']='M\u00F6chten Sie diese \u00C4nderung in Ihrem Profil speichern?';profconf_arr['it']='Vuoi salvare queste modifiche al tuo profilo?';profconf_arr['zt']='\u60A8\u8981\u5C07\u6B64\u8B8A\u66F4\u5132\u5B58\u81F3\u60A8\u7684\u500B\u4EBA\u6A94\u6848\u4E2D\u55CE\uFF1F';var profremember_arr=Array();profremember_arr['en']="Don't ask me this again";profremember_arr['zh']='\u4E0D\u8981\u518D\u6B21\u8BE2\u95EE\u6211';profremember_arr['ko']='\uB2E4\uC2DC \uBB3B\uC9C0 \uC54A\uAE30';profremember_arr['pt']='N\u00E3o perguntar novamente';profremember_arr['fr']='Ne plus me demander';profremember_arr['ru']='\u0411\u043E\u043B\u044C\u0448\u0435 \u043D\u0435 \u0441\u043F\u0440\u0430\u0448\u0438\u0432\u0430\u0442\u044C';profremember_arr['es']='No volver a preguntar';profremember_arr['ja']='\u6B21\u56DE\u304B\u3089\u8868\u793A\u3057\u306A\u3044';profremember_arr['de']='Bitte stellen Sie mir diese Frage nicht mehr.';profremember_arr['it']='Non ripetere pi\u00F9 questa domanda';profremember_arr['zt']='\u4E0D\u8981\u518D\u554F\u6211\u9019\u500B\u554F\u984C';var profileCntry_arr=Array();profileCntry_arr['en']='You have selected a Country different from your <a href="/profile/index.action">Delta Profile</a> preference';profileCntry_arr['zh']='\u60A8\u9009\u62E9\u4E86\u4E00\u4E2A\u56FD\u5BB6<a href="/profile/index.action">\u4E09\u89D2\u6D32\u7B80\u4ECB</ a>\u7684\u504F\u597D\u4E0D\u540C';profileCntry_arr['ko']='\uACE0\uAC1D\uB2D8\uC758 \uB378\uD0C0 \uD504\uB85C\uD544 \uC124\uC815\uACFC \uB2E4\uB978 \uAD6D\uAC00\uB97C \uC120\uD0DD\uD558\uC168\uC2B5\uB2C8\uB2E4.';profileCntry_arr['pt']='Voc\u00EAselecionou um pa\u00EDsdiferente de suaprefer\u00EAncia no <a href="/profile/index.action">perfil da Delta</a>.';profileCntry_arr['fr']='Vous avez s\u00E9lectionn\u00E9 un pays diff\u00E9rent de celui sp\u00E9cifi\u00E9 dans les pr\u00E9f\u00E9rences de votre <a href="/profile/index.action">profil Delta</a>.';profileCntry_arr['ru']='';profileCntry_arr['es']='Ha seleccionado un país diferente al de su preferencia en el <a href="/profile/index.action">Perfil de Delta</a>.';profileCntry_arr['ja']='\u30D7\u30ED\u30D5\u30A3\u30FC\u30EB\u306E\u8A2D\u5B9A\u3068\u7570\u306A\u308B\u56FD\u304C\u9078\u629E\u3055\u308C\u307E\u3057\u305F\u3002';profileCntry_arr['de']='Ihr ausgew\u00E4hltes Land entspricht nicht den Pr\u00E4ferenzen Ihres <a href="/profile/index.action">Delta-Profils</a>.';profileCntry_arr['it']='Hai selezionato un Paese diverso rispetto alle preferenze del tuo <a href="/profile/index.action">Profilo Delta</a>';profileCntry_arr['zt']='\u60A8\u5DF2\u9078\u64C7\u8207\u60A8\u300C\u9054\u7F8E\u500B\u4EBA\u6A94\u6848\u300D\u559C\u597D\u8A2D\u5B9A\u4E0D\u540C\u7684\u570B\u5BB6\uFF0F\u5340\u57DF\u3002';var nothnks_arr=Array();nothnks_arr['en']='No Thanks';nothnks_arr['zh']='\u4E0D\uFF0C\u8C22\u8C22';nothnks_arr['ko']='\uC544\uB2C8\uC694.';nothnks_arr['pt']='N\u00E3o, obrigado.';nothnks_arr['fr']='Non, merci';nothnks_arr['ru']='Нет, спасибо';nothnks_arr['es']='No gracias';nothnks_arr['ja']='\u3044\u3044\u3048';nothnks_arr['de']='Nein danke';nothnks_arr['it']='No grazie';nothnks_arr['zt']='\u4E0D\uFF0C\u8B1D\u8B1D';var yesupdateprof_arr=Array();yesupdateprof_arr['en']='Yes, Update My Profile ';yesupdateprof_arr['zh']='\u662F\uFF0C\u66F4\u65B0\u201C\u6211\u7684\u8D44\u6599\u5E93\u201D';yesupdateprof_arr['ko']='\uB124\uFF0C\uD504\uB85C\uD544 \uC815\uBCF4\uB97C \uC5C5\uB370\uC774\uD2B8\uD574\uC8FC\uC138\uC694';yesupdateprof_arr['pt']='Sim, atualizar meu perfil';yesupdateprof_arr['fr']='Oui, actualiser mon Profil';yesupdateprof_arr['ru']='\u0414\u0430, \u043E\u0431\u043D\u043E\u0432\u0438\u0442e \u043C\u043E\u0439 \u043F\u0440\u043E\u0444\u0438\u043B\u044C';yesupdateprof_arr['es']='S\u00ED, actualizar mi perfil';yesupdateprof_arr['ja']='\u30D7\u30ED\u30D5\u30A3\u30FC\u30EB\u3092\u66F4\u65B0\u3059\u308B';yesupdateprof_arr['de']='Ja, aktualisieren Sie Mein Profil';yesupdateprof_arr['it']='S\u00EC, aggiorna il mio profilo';yesupdateprof_arr['zt']='\u662F\uFF0C\u66F4\u65B0\u6211\u7684\u500B\u4EBA\u6A94\u6848';var yesgotoprof_arr=Array();yesgotoprof_arr['en']='Yes, Go To My Profile';yesgotoprof_arr['zh']='\u662F\uFF0C\u8FDB\u5165\u201C\u6211\u7684\u8D44\u6599\u5E93\u201D';yesgotoprof_arr['ko']='\uC608. \u2018\uB0B4 \uD504\uB85C\uD544\u2019\uB85C \uC774\uB3D9\uD569\uB2C8\uB2E4.';yesgotoprof_arr['pt']='Sim, v\u00E1 para o meu perfil';yesgotoprof_arr['fr']='Oui, aller dans Mon profil';yesgotoprof_arr['ru']='';yesgotoprof_arr['es']='S\u00ED, ir a Mi Perfil';yesgotoprof_arr['ja']='\u30DE\u30A4\u30D7\u30ED\u30D5\u30A3\u30FC\u30EB\u3092\u8868\u793A';yesgotoprof_arr['de']='Jetzt zu meinem Profil gehen';yesgotoprof_arr['it']='S\u00EC, vai al Mio Profilo';yesgotoprof_arr['zt']='\u662F\uFF0C\u8ACB\u524D\u5F80\u300C\u6211\u7684\u500B\u4EBA\u6A94\u6848\u300D';var popularCountry_arr=Array()
popularCountry_arr['cn']='\u4E2D\u56FD';popularCountry_arr['br']='Brasil';popularCountry_arr['jp']='\u65E5\u672C';popularCountry_arr['de']='Deutschland';popularCountry_arr['us']='';var countryLanguageMapDetails;var countryLanguageMapping;var continentMapping;var startDialogOpen=false;var profileCheckbox=0;var isUserloggedin=false;var countryLanguageDetails;var CountryLanguageController={countryLanguageCookieName:'pref',defaultCountry:"us",defaultLanguage:"en",hyphen:"-",supportedLanguages:{de:'de',es:'us',fr:'fr',it:'it',ja:'jp',ko:'kr',pt:'br',zh:'cn',zt:'tw'},defaultISO:this.defaultLanguage+this.hyphen+this.defaultCountry,getCountryLanguagePreference:function(){return CookieUtils.get(this.countryLanguageCookieName);},getCountryCode:function(){var countryLanguageCode=this.getCountryLanguagePreference();if(countryLanguageCode.length==5){return countryLanguageCode.split(this.hyphen)[0];}else{return null;}},getDefault:function(isoCode){if(this.isEnglishURL(isoCode)){return this.defaultCountry;}
try{if(this.supportedLanguages[isoCode]!=undefined){return this.supportedLanguages[isoCode];}}catch(error){return this.defaultCountry;}},getLanguageCode:function(countryLanguageCode){countryLanguageCode=this.getCountryLanguagePreference();if(countryLanguageCode.length==5){return countryLanguageCode.split(this.hyphen)[1];}else{return null;}},getProxy:function(){var rtn=window.location.href.split(";");if(rtn.length>1){rtn=rtn[0]+";";}else{rtn=rtn[0];}
return rtn;},isEnglishURL:function(str){var re=new RegExp(/www\d*|delta|draft\d*|si\d*|st\d*|qa\d*|ddwa\d*|dswa\d*|dtwa\d*|dpwa\d*|\d*|.*as\d*|localhost/);return str.match(re)[0]!="";},doLanguageChoice:function(language,location){var pref=language+this.hyphen+location;CustomerInfo.setCountryLanguageCookies(pref);if(language==parent.MP.UrlLang){setTimeout(function(){if(window.location.search!=null&&window.location.search.indexOf("lang")!=-1){window.location=window.location.href.replace(window.location.href.substring(window.location.href.indexOf("lang"),window.location.href.indexOf("lang")+14),"");}else{window.location.reload();}},500);}else{setTimeout("parent.MP.switchLanguage('"+language+"')",500);}},populateCountryLanguageDetails:function(){var rtnString_unitedStatesCanada;var rtnString_latinAmericaCarribbean;var rtnString_sounthAmerica;var rtnString_europe;var rtnString_africaMiddleEast;var rtnString_asiaPacific;rtnString_unitedStatesCanada=new htmlDefinition({"tag":"div","id":"unitedStatesCanadaLang","classname":"countryLangDtlsClass"});rtnString_latinAmericaCarribbean=new htmlDefinition({"tag":"div","id":"latinAmericaCarribbeanLang","classname":"countryLangDtlsClass"});rtnString_sounthAmerica=new htmlDefinition({"tag":"div","id":"sounthAmericaLang","classname":"countryLangDtlsClass"});rtnString_europe=new htmlDefinition({"tag":"div","id":"europeLang","classname":"countryLangDtlsClass"});rtnString_africaMiddleEast=new htmlDefinition({"tag":"div","id":"africaMiddleEastLang","classname":"countryLangDtlsClass"});rtnString_asiaPacific=new htmlDefinition({"tag":"div","id":"asiaPacificLang","classname":"countryLangDtlsClass"});var countryLanguageDetailsMap=new Object();countryLanguageMapping=new Object();countryLanguageDetails=countryLanguageDetails.sort(function(a,b){if(a.countryName<b.countryName){return-1};if(a.countryName>b.countryName){return 1};return 0;});for(var i=0;i<countryLanguageDetails.length;i++){var tmpObj=countryLanguageDetails[i];var countryLangDiv="";if(tmpObj.regionCode=='CA'||tmpObj.regionCode=='US'||tmpObj.regionCode=='MX'){countryLangDiv=this.populateLanguageDetails(tmpObj,countryLanguageMapping);rtnString_unitedStatesCanada.children.push(countryLangDiv);}else if(tmpObj.regionCode=='CAM'||tmpObj.regionCode=='CAR'){countryLangDiv=this.populateLanguageDetails(tmpObj,countryLanguageMapping);rtnString_latinAmericaCarribbean.children.push(countryLangDiv);}else if(tmpObj.regionCode=='BR'||tmpObj.regionCode=='SAM'||tmpObj.regionCode=='uy'){countryLangDiv=this.populateLanguageDetails(tmpObj,countryLanguageMapping);rtnString_sounthAmerica.children.push(countryLangDiv);}else if(tmpObj.regionCode=='DE'||tmpObj.regionCode=='EET'||tmpObj.regionCode=='ENT'||tmpObj.regionCode=='ES'||tmpObj.regionCode=='EZT'||tmpObj.regionCode=='GB'||tmpObj.regionCode=='IE'||tmpObj.regionCode=='IT'||tmpObj.regionCode=='FR'){countryLangDiv=this.populateLanguageDetails(tmpObj,countryLanguageMapping);rtnString_europe.children.push(countryLangDiv);}else if(tmpObj.regionCode=='AF'||tmpObj.regionCode=='ME'||tmpObj.regionCode=='SA'){countryLangDiv=this.populateLanguageDetails(tmpObj,countryLanguageMapping);rtnString_africaMiddleEast.children.push(countryLangDiv);}else if(tmpObj.regionCode=='AN'||tmpObj.regionCode=='AS'||tmpObj.regionCode=='GC'||tmpObj.regionCode=='IN'||tmpObj.regionCode=='JP'||tmpObj.regionCode=='EE'||tmpObj.regionCode=='MI'||tmpObj.regionCode=='PS'){countryLangDiv=this.populateLanguageDetails(tmpObj,countryLanguageMapping);rtnString_asiaPacific.children.push(countryLangDiv);}}
countryLanguageDetailsMap["unitedStatesCanada"]=HTMLModeler.createComplexObject(rtnString_unitedStatesCanada);countryLanguageDetailsMap["latinAmericaCarribbean"]=HTMLModeler.createComplexObject(rtnString_latinAmericaCarribbean);countryLanguageDetailsMap["sounthAmerica"]=HTMLModeler.createComplexObject(rtnString_sounthAmerica);countryLanguageDetailsMap["europe"]=HTMLModeler.createComplexObject(rtnString_europe);countryLanguageDetailsMap["africaMiddleEast"]=HTMLModeler.createComplexObject(rtnString_africaMiddleEast);countryLanguageDetailsMap["asiaPacific"]=HTMLModeler.createComplexObject(rtnString_asiaPacific);return countryLanguageDetailsMap;},populateLanguageDetails:function(tmpObj,countryLanguageMapping){var countryDiv=new htmlDefinition({"tag":"div","classname":"displayDetails"});var countrySpan=new htmlDefinition({"tag":"span","classname":"countryName","text":tmpObj.countryName});var langSpan=new htmlDefinition({"tag":"span","classname":"countryLanguage"});var dividerSpan=new htmlDefinition({"tag":"span","classname":"countryName","text":" | "});var emptySpan=new htmlDefinition({"tag":"span","classname":"countryName","text":" "});var langDetails=tmpObj.languageDtls;var countryLangMap=new Object();var languageList="";var languageNameSpan=new htmlDefinition({"tag":"span","classname":"countryLanguage"});for(var j=langDetails.length-1;j>=0;j--){var langLink=new htmlDefinition({"tag":"a","href":"#"});var newLineTag=new htmlDefinition({"tag":"br","selfclose":true});var linkId="";if(j!=(langDetails.length-1)&&j%2==0){langSpan.children.push(dividerSpan);languageNameSpan.children.push(dividerSpan);}else if(j!=(langDetails.length-1)&&j%2!=0){langSpan.children.push(emptySpan);}
linkId=langDetails[j].languageCode+this.hyphen+tmpObj.isoCode;langLink.setProp("text",langDetails[j].languageName);langLink.setProp("id",linkId);langSpan.children.push(langLink);languageNameSpan.children.push(langLink);countryLangMap[langDetails[j].languageCode]=langDetails[j].languageName;}
countryLangMap["countryName"]=tmpObj.countryName;countryLangMap["language"]=languageNameSpan;countryLanguageMapping[tmpObj.isoCode]=countryLangMap;countryDiv.children.push(countrySpan);countryDiv.children.push(langSpan);return countryDiv;},getPerticularCountryLanguageDetails:function(){var countryDetailsWrapperDiv=new htmlDefinition({"tag":"div","classname":"countryDetailsWrapper"});var perCountryCodes=['us','br','cn','jp','de'];for(var i=0;i<perCountryCodes.length;i++){var isoCode=perCountryCodes[i];var obj=countryLanguageMapping[isoCode];var countryImageDetailsDiv=new htmlDefinition({"tag":"div","classname":"countryImageDetails"});try{if(window.location.href.indexOf("/content/www")!=-1){imgPath="";}}catch(error){}
var imageFlagUrl=imgPath+"/etc/designs/delta/images/flags/"+isoCode.toUpperCase()+".png";var imgDiv=new htmlDefinition({"tag":"div","classname":"countryImageWrapper"});var img=new htmlDefinition({"tag":"img","src":imageFlagUrl});var countryLangDiv=new htmlDefinition({"tag":"div","classname":"countryLanguageDtlsWrapper"});var poppularCountryName=(isoCode=='us'?'':popularCountry_arr[isoCode]+" (")+obj.countryName+(isoCode=='us'?'':")");var countryNameSpan=new htmlDefinition({"tag":"span","classname":"countryName","text":poppularCountryName});var languageNameSpan=obj.language;imgDiv.children.push(img);countryImageDetailsDiv.children.push(imgDiv);countryLangDiv.children.push(countryNameSpan);countryLangDiv.children.push(languageNameSpan);countryImageDetailsDiv.children.push(countryLangDiv);$('.countryDetailsWrapper').append(HTMLModeler.createComplexObject(countryImageDetailsDiv));}},getCountryListByRegion:function(regionCode){$('ul#continents li#'+regionCodeMapping[regionCode]+' a').attr('class','active');$('.regionDiv').unbind('click');$('.continentList').unbind('click');var contModalClass="";var titleContent=$("#"+regionCode+"").html();$("div#countryLangList").html(countryLanguageMapDetails[regionCodeMapping[regionCode]]);var modalWidth="867";if(regionCode=="northamerica"){modalWidth="645";}else if(regionCode=="europeCnt"){contModalClass="europContDialog";}
$('div#countryLangList').dialog({modal:true,resizable:false,width:modalWidth,minHeight:50,dialogClass:contModalClass,draggable:false,show:{effect:'drop',direction:"up"},hide:{effect:'drop',direction:"down"},position:{my:'center',at:'center',of:'#continents'},open:function(event,ui){var ele=$(event.target).parent();ele.find('.ui-dialog-title').html(titleContent);ele.find('.ui-dialog-titlebar').attr('id','countryLangModal');ele.find('.ui-dialog-titlebar').addClass('ui-dialog-no-title');$('ul#continents li#'+regionCodeMapping[regionCode]+' a').removeAttr('class','active');var reducedZIndex=""+parseInt($("div.ui-widget-overlay").css("z-index"))-parseInt("100");$("div.ui-widget-overlay").css("z-index",reducedZIndex);CountryLanguageController.bindOnClickHandler();},close:function(event,ui){startDialogOpen=false;$(".continentList > a").removeClass("active");CountryLanguageController.bindOnClickHandler();}});},setDefaultCountryLanguage:function(isoCode,languageCode){var obj=countryLanguageMapping[isoCode];var countryName=obj.countryName;var languageDtls=obj[languageCode];try{if(window.location.href.indexOf("/content/www")!=-1){imgPath="";}}catch(error){}
var imageFlagUrl=imgPath+"/etc/designs/delta/images/flags/"+isoCode.toUpperCase()+".png";$('.currenCountryImage').attr('src',imageFlagUrl);$('.currentCountryLanguageDetails').html(countryName+", "+languageDtls);},updateCountryLangChoice:function(isoCode){var isPageRefreshing=false;var prefArr=isoCode.split(this.hyphen);var lang=prefArr[0];var location=prefArr[1];this.setDefaultCountryLanguage(location.toLowerCase(),lang.toLowerCase());CookieUtils.create(this.countryLanguageCookieName,isoCode,30);this.doLanguageChoice(lang.toLowerCase(),location.toLowerCase());},getCustomerLang:function(customerID,skymilesNumber,selectedCountry,selectedLanguage,obj){CountryDetailsProcessor.isLanguageSupported(selectedCountry,selectedLanguage,CountryLanguageController.handleSupportedLangResp);CountryLanguageController.showProfileLanguageUpdateDialog('/utils/shared/dialogs/profileUpdateDialog.jsp','auto',490,450,250,selectedLanguage,obj);},handleSupportedLangResp:function(str){if(str==false){$(".unsupportedLanguageMessage").css('display','block');}else{$(".unsupportedLanguageMessage").css('display','none');}},showProfileCountryUpdateDialog:function(url,heightVal,widthVal,xPosition,yPosition,selectedCountry,selectedLanguage){$('<div id="profileCountryUpdateDialogDiv">').dialog({resizable:false,height:heightVal,width:widthVal,title:" ",position:[xPosition,yPosition],open:function(event,ui){$('div.ui-dialog-content').css('height',heightVal);var reducedZIndex=""+parseInt($("div.ui-widget-overlay").css("z-index"))-parseInt("100");$("div.ui-widget-overlay").css("z-index",reducedZIndex);var ele=$(event.target).parent();ele.find('.ui-dialog-titlebar').remove();$(this).load(url,function(){$("#profileCntyUpdate").html(profileCntry_arr[selectedLanguage.toLowerCase()]);$("#profileUpdateConf").html(profconf_arr[selectedLanguage.toLowerCase()]);$("#dontAsk").html(profremember_arr[selectedLanguage.toLowerCase()]);$("#nothanksCountryProfile").html(nothnks_arr[selectedLanguage.toLowerCase()]);$("#goToProfile").html(yesgotoprof_arr[selectedLanguage.toLowerCase()]);});$('<div></div>').addClass('ui-widget-overlay').appendTo(document.body);if($('div#countryLangList').dialog('isOpen')){$('div#countryLangList').dialog("close");}
if($("#ui-modal-dialog").is(':visible')){$("#ui-modal-dialog").remove();$(".ui-widget-overlay").remove();}
var customerID=CustomerInfo.getCustomerId();var skymilesNumber=CustomerInfo.getSkyMilesNumber();$("#updatemsgProfile").live("click",function(event,ui){var countryLagnObj;if($("#updatemsgProfile").attr('checked')!=undefined){countryLagnObj={"customerID":customerID,"skymilesNumber":skymilesNumber,"promtIndicatorVal":true};}else{countryLagnObj={"customerID":customerID,"skymilesNumber":skymilesNumber,"promtIndicatorVal":false};}
jQuery.ajax({url:"/profile/countryLang_updateLangPromtIndicator.action",type:"POST",data:countryLagnObj,dataType:"json",success:function(langPromtIndicator){}});});$("#goToProfile").live("click",function(event,ui){var pref=selectedLanguage+CountryLangObj.hyphen+selectedCountry;CustomerInfo.setCountryLanguageCookies(pref);var urlAction='/profile/index.action';MP.SrcUrl=window.location.protocol+"//"+window.location.hostname+urlAction;setTimeout("parent.MP.switchLanguage('"+selectedLanguage+"')",500);});$("#nothanksCountryProfile").live("click",function(event,ui){$("#profileCountryUpdateDialogDiv").dialog("close");var pref=selectedLanguage+CountryLangObj.hyphen+selectedCountry;CountryLangObj.updateCountryLangChoice(pref);});},close:function(event,ui){$('div.ui-widget-overlay').remove();}});},showProfileLanguageUpdateDialog:function(url,heightVal,widthVal,xPosition,yPosition,selectedLanguage,obj){$('<div id="profileUpdateDialogDiv">').dialog({height:heightVal,width:widthVal,title:" ",position:[xPosition,yPosition],resizable:false,open:function(event,ui){$('div.ui-dialog-content').css('height',heightVal);var reducedZIndex=""+parseInt($("div.ui-widget-overlay").css("z-index"))-parseInt("100");$("div.ui-widget-overlay").css("z-index",reducedZIndex);var ele=$(event.target).parent();ele.find('.ui-dialog-titlebar').remove();$(this).load(url,function(){$("#profileLangUpdate").html(profmsg_arr[selectedLanguage.toLowerCase()]);$("#profileUpdateConf").html(profconf_arr[selectedLanguage.toLowerCase()]);$("#dontAsk").html(profremember_arr[selectedLanguage.toLowerCase()]);$("#nothanks").html(nothnks_arr[selectedLanguage.toLowerCase()]);$("#update_profile").html(yesupdateprof_arr[selectedLanguage.toLowerCase()]);});$('<div></div>').addClass('ui-widget-overlay').appendTo(document.body);if($('div#countryLangList').dialog('isOpen')){$('div#countryLangList').dialog("close");}
if($("#ui-modal-dialog").is(':visible')){$("#ui-modal-dialog").remove();$(".ui-widget-overlay").remove();}
var customerID=CustomerInfo.getCustomerId();var skymilesNumber=CustomerInfo.getSkyMilesNumber();$("#updatemsgProfile").live("click",function(event,ui){var countryLagnObj;if($("#updatemsgProfile").attr('checked')!=undefined){countryLagnObj={"customerID":customerID,"skymilesNumber":skymilesNumber,"promtIndicatorVal":true};}else{countryLagnObj={"customerID":customerID,"skymilesNumber":skymilesNumber,"promtIndicatorVal":false};}
jQuery.ajax({url:"/profile/countryLang_updateLangPromtIndicator.action",type:"POST",data:countryLagnObj,dataType:"json",success:function(langPromtIndicator){}});});$("#nothanks").live("click",function(event,ui){if($('div#profileUpdateDialogDiv').dialog('isOpen')){$("div#profileUpdateDialogDiv").dialog("close");}else{$("div#profileUpdateDialogDiv").remove();}
CountryLangObj.updateCountryLangChoice($(obj).attr('id'));});$("#update_profile").live("click",function(event,ui){if($('div#profileUpdateDialogDiv').dialog('isOpen')){$("div#profileUpdateDialogDiv").dialog("close");}else{$("div#profileUpdateDialogDiv").remove();}
var countryLagnObj={"customerID":customerID,"skymilesNumber":skymilesNumber,"preferencesDO.preferredLangCd":selectedLanguage};jQuery.ajax({url:"/profile/updateLanguagePreference.action",type:"POST",data:countryLagnObj,dataType:"json",success:function(language){}});CountryLangObj.updateCountryLangChoice($(obj).attr('id'));});},close:function(event,ui){$('div.ui-widget-overlay').remove();}});},updateProfileConfirmation:function(obj){if(profileCheckbox==1){$('div[aria-labelledby="ui-dialog-title-countryLangList"]').css('display','block');$("div.profileUpdateDialogDiv").css('display','none');}else{var selectedCountryLang=obj.id;var curCookie=CookieUtils.get(this.countryLanguageCookieName);if(DeltaUtils.exists(curCookie)&&curCookie===selectedCountryLang){if($("#ui-modal-dialog").is(':visible')){$("#ui-modal-dialog").remove();$(".ui-widget-overlay").remove();}
if($('div#countryLangList').dialog('isOpen')){$('div#countryLangList').dialog("close");}
if($('div.profileCountryUpdateDialogDiv').dialog('isOpen')){$('div.profileCountryUpdateDialogDiv').dialog("close");}}
if(selectedCountryLang.indexOf(CountryLangObj.hyphen)!=-1){var countryLangArr=new Array();countryLangArr=selectedCountryLang.split(this.hyphen);var selectedLang=countryLangArr[0];var selectedCountry=countryLangArr[1];var customerID=CustomerInfo.getCustomerId();var skymilesNumber=CustomerInfo.getSkyMilesNumber();var promptIndicator=CustomerInfo.getLangPromptIndicator();var profileLanguage=CustomerInfo.getLanguage();var profileCountry=CustomerInfo.getCountry();if(!DeltaUtils.exists(promptIndicator)||'false'===promptIndicator||!promptIndicator){if(profileCountry!=null&&selectedCountry!=null&&profileCountry.toLowerCase()!=selectedCountry.toLowerCase()){CountryLanguageController.showProfileCountryUpdateDialog('/utils/shared/dialogs/profileCountryUpdateDialog.jsp','auto',450,450,250,selectedCountry.toLowerCase(),selectedLang.toLowerCase());}else{CountryLangObj.getCustomerLang(customerID,skymilesNumber,selectedCountry,selectedLang,obj);}}
else{CountryLangObj.updateCountryLangChoice(selectedCountryLang);}}}},init:function(){if(countryLanguageDetails==null){CountryDetailsProcessor.getCountryLangList(function(str){countryLanguageDetails=str;CountryLanguageController.initAll();});}else{this.initAll();}},initAll:function(){countryLanguageMapDetails=this.populateCountryLanguageDetails();this.getPerticularCountryLanguageDetails();this.bindOnClickHandler();$("#ui-modal-dialog").bind("dialogclose",function(event,ui){if($('div#countryLangList').dialog('isOpen')){$('div#countryLangList').dialog("close");}});continentMapping=new Object();$.each(regionCodeMapping,function(key,val){continentMapping[val]=key;});$('span.countryLanguage a').live('click',function(e){if(CustomerInfo.isLoggedIn()){CountryLangObj.updateProfileConfirmation(this);}else{CountryLangObj.updateCountryLangChoice($(this).attr('id'));}});var lang=this.defaultLanguage;var country=this.defaultCountry;if(DeltaUtils.exists(CookieUtils.get(this.countryLanguageCookieName))&&CookieUtils.get(this.countryLanguageCookieName).length>1){lang=CookieUtils.get(this.countryLanguageCookieName).split(this.hyphen)[0];country=CookieUtils.get(this.countryLanguageCookieName).split(this.hyphen)[1];}else if(typeof parent.MP!='undefined'&&typeof parent.MP.getCookie!='undefined'){var langCookie=parent.MP.getCookie('MP_LANG');var countryCookie=parent.MP.getCookie('MP_COUNTRY');if(typeof langCookie!='undefined'||langCookie==''){lang=langCookie;}
if(typeof countryCookie!='undefined'||countryCookie==''){country=countryCookie;}
if(langCookie==null){lang=this.defaultLanguage;}
if(countryCookie==null){country=this.defaultCountry;}}
var motionFlow=$("#motionFlow").val();if(motionFlow==null||motionFlow==""){$('h3#welcome').html(welcome_arr[lang]);$('#yes_button').html(yes_arr[lang]);$('#currSetting').html(currSetting_arr[lang]);}
this.displayLang(lang);this.setDefaultCountryLanguage(country.toLowerCase(),lang.toLowerCase());},displayLang:function(lang){$('h1#sel_lang').html(selCountryLan_arr[lang]);},bindOnClickHandler:function(){var isDialogOpen=false;$(document).on('click',function(e){if($(e.target).is('body')||$(e.target).is('.ui-widget-overlay')){if($("#ui-modal-dialog").is(':visible')){$("#ui-modal-dialog").remove();$(".ui-widget-overlay").remove();}
if($('div#countryLangList').dialog('isOpen')){$('div#countryLangList').dialog("close");}
if($('div.profileCountryUpdateDialogDiv').dialog('isOpen')){$('div.profileCountryUpdateDialogDiv').dialog("close");}}else if(!$(e.target).is("a.active#")&&!$(e.target).is('div#countryLangModal.ui-dialog-titlebar')&&!$(e.target).is(".regionDiv")&&$('div#countryLangList').has(e.target).length==0){if($('div#countryLangList').dialog("isOpen")){$('div#countryLangList').dialog("close");}}});if(!startDialogOpen){$('.regionDiv').bind("mouseover");$('.regionDiv').bind("mouseout");$('.regionDiv').bind("click");$('.continentList').bind("mouseover");$('.continentList').bind("mouseout");$('.continentList').bind("click");}
$('.regionDiv').bind({click:function(){isDialogOpen=true;startDialogOpen=true;CountryLanguageController.getCountryListByRegion(continentMapping[this.id]);switch(this.id){case"unitedStatesCanada":$("ul#continents li#northamerica a").addClass("active");break;case"latinAmericaCarribbean":$("ul#continents li#latinamerica a").addClass("active");break;case"sounthAmerica":$("ul#continents li#southamerica a").addClass("active");break;case"europe":$("ul#continents li#europeCnt a").addClass("active");break;case"africaMiddleEast":$("ul#continents li#africa a").addClass("active");break;case"asiaPacific":$("ul#continents li#asia a").addClass("active");break;break
default:break;}},mouseover:function(){if(startDialogOpen){$('.regionDiv').unbind("mouseover");$('.regionDiv').unbind("mouseout");$('.regionDiv').unbind("click");}else{$('.regionDiv').bind("mouseover");$('.regionDiv').bind("click");$('ul#continents li#'+regionCodeMapping[this.id]+' a').attr('class','active');switch(this.id){case"unitedStatesCanada":$("ul#continents li#northamerica a").addClass("active");break;case"latinAmericaCarribbean":$("ul#continents li#latinamerica a").addClass("active");break;case"sounthAmerica":$("ul#continents li#southamerica a").addClass("active");break;case"europe":$("ul#continents li#europeCnt a").addClass("active");break;case"africaMiddleEast":$("ul#continents li#africa a").addClass("active");break;case"asiaPacific":$("ul#continents li#asia a").addClass("active");break;break
default:break;}}},mouseout:function(){if(!startDialogOpen){$('ul#continents li#'+regionCodeMapping[this.id]+' a').removeAttr('class','active');switch(this.id){case"unitedStatesCanada":$("ul#continents li#northamerica a").removeClass("active");break;case"latinAmericaCarribbean":$("ul#continents li#latinamerica a").removeClass("active");break;case"sounthAmerica":$("ul#continents li#southamerica a").removeClass("active");break;case"africaMiddleEast":$("ul#continents li#africa a").removeClass("active");break;case"asiaPacific":$("ul#continents li#asia a").removeClass("active");break;default:break;}}}});$('.continentList').bind({click:function(){isDialogOpen=true;startDialogOpen=true;$('ul#continents li#'+this.id+' a').attr('class','active');CountryLanguageController.getCountryListByRegion(this.id);},mouseover:function(){if(startDialogOpen){$('.continentList').unbind("mouseover");$('.continentList').unbind("mouseout");$('.continentList').unbind("click");}else{$('.continentList').bind("mouseover");$('.continentList').bind("click");$('ul#continents li#'+this.id+' a').attr('class','active');}},mouseout:function(){if(!startDialogOpen){$('ul#continents li#'+this.id+' a').removeAttr('class','active');}}});}};var regionCodeMapping={"northamerica":"unitedStatesCanada","latinamerica":"latinAmericaCarribbean","southamerica":"sounthAmerica","europeCnt":"europe","africa":"africaMiddleEast","asia":"asiaPacific"};var continentMapping={"unitedStatesCanada":"northamerica","latinAmericaCarribbean":"latinamerica","sounthAmerica":"southamerica","europe":"europeCnt","africaMiddleEast":"africa","asiaPacific":"asia"}
var CountryLangObj=CountryLanguageController;