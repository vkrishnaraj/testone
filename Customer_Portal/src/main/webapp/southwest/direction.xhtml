<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"
	template="../layout/southwest_template.xhtml">


	<ui:define name="title">Southwest Airlines: Customer Portal</ui:define>

	<ui:define name="body">
		<h:form id="appForm" enctype="multipart/form-data">

			<p class="contentHeader"><h:outputText value="#{msg.status_title}" /></p>
			
			<rich:spacer width="100%" height="20" title=""/>
			
			<rich:messages id="reportMsg" errorClass="errormsg" infoClass="infomsg" layout="list"/>
			
			<rich:spacer width="100%" height="10" title=""/>

			<p class="contentSubHeader"><h:outputText value="#{msg.status_text_desc}" /></p>
			
			<rich:spacer width="100%" height="20" title=""/>
			
			<h:panelGrid columns="3" width="50%">
			<h:outputLink value="/customer-portal/showImage?ID=swa_faq.pdf" target="blank" >
				<h:outputText value="#{msg.status_link_faq}" />
			</h:outputLink>
			
			<rich:spacer width="30" title=""/>
			
			<h:outputLink value="/customer-portal/showImage?ID=swa_claim_form.pdf" target="blank" >
				<h:outputText value="#{msg.status_link_claim_form}" />
			</h:outputLink>
			</h:panelGrid>
			
			<rich:spacer width="100%" height="30" title=""/>

			<h:panelGrid columns="2" width="60%">
				<h:outputText value="#{msg.status_label_file_nbr}" />
				<h:outputText value="#{customerPortal.passengerData.incidentID}" />
	
				<h:outputText value="#{msg.status_label_date_opn}" />
				<h:outputText value="#{customerPortal.passengerData.dispcreatetime}" />
	
				<h:outputText value="#{msg.status_label_file_sts}" />
				<h:outputText value="#{customerPortal.passengerBean.status}" />
			</h:panelGrid>  

			<a4j:repeat value="#{customerPortal.passengerData.passengersArray}"
				var="passenger" rowKeyVar="rowIndex">
				<h:panelGrid columns="2" width="60%">
					<h3><h:outputText value="#{passenger.firstname} "
						styleClass="formLabel" />&nbsp;&nbsp;<h:outputText
						value=" #{passenger.lastname}" styleClass="formLabel" /></h3>
					<rich:spacer width="30" title=""/>
	
					<h:outputText value="#{msg.status_label_home_phn}" />
					<h:outputText value="#{passenger.homephone}" />
	
					<h:outputText value="#{msg.status_label_bus_phn}" />
					<h:outputText value="#{passenger.workphone}"/>
	
					<h:outputText value="#{msg.status_label_mob_phn}" />
					<h:outputText value="#{passenger.mobile}" />
	
					<h:outputText value="#{msg.status_label_email}" />
					<h:outputText value="#{passenger.email}" />
				</h:panelGrid>  

			</a4j:repeat>
			
			<rich:spacer width="100%" height="30" title=""/>

			<p class="contentSubHeader"><h:outputText value="#{msg.status_label_bag_info}" /></p>
				
			<a4j:repeat value="#{customerPortal.passengerBean.pvItems}" var="item" rowKeyVar="rowIndex">
				<b><h:outputText value="#{msg.status_label_bag_nmb}#{rowIndex + 1}" styleClass="formLabel" /></b><br/>
				<table>
				<h:panelGroup rendered="#{item.claimchecknumavail}">
					<tr><td><h:outputText value="#{msg.status_label_bag_tag}" /></td>
					<td><h:outputText value="#{item.claimchecknum}" /></td>
					</tr>
				</h:panelGroup>
			
				<tr><td><h:outputText value="#{msg.status_label_bag_status}" /></td>
				<td><h:outputText value="#{item.bagstatus}" />
				</td></tr></table>
			</a4j:repeat>
			
			<rich:spacer width="100%" height="20" title=""/>
			
			<p class="contentSubHeader"><t:outputText value="#{msg.status_title_messages}" /></p>
			
			<rich:spacer width="100%" height="10" title=""/>
				
			<p><t:outputText value="#{msg.status_text_past_msgs}" /></p>
			
			<rich:spacer width="100%" height="10" title=""/>
			
			<a4j:outputPanel id="messagePanel" ajaxRendered="true">
				<t:dataTable width="80%" align="center" id="messageTable" value="#{customerPortal.passengerBean.messages}" var="message">
						
					<f:facet name="spacer">
          				<f:verbatim>&amp;#160;</f:verbatim>
    				</f:facet>	
					<h:column rendered="#{message.publish}">
				        <f:facet name="header">
				            <h:outputText value="#{msg.status_column_message}"/>
				        </f:facet>
						<h:outputText value="#{message.message}" escape="false"/>
					</h:column>
					<h:column rendered="#{message.publish}">
				        <f:facet name="header">
				            <h:outputText value="#{msg.status_column_sender}"/>
				        </f:facet>
						<h:outputText value="#{message.username}" />
					</h:column>
					<h:column rendered="#{message.publish}">
				        <f:facet name="header">
				            <h:outputText value="#{msg.status_column_date}"/>
				        </f:facet>
						<h:outputText value="#{message.dispDateCreated}" />
					</h:column>
					
				</t:dataTable>
				
			</a4j:outputPanel>
			
			<rich:spacer width="100%" height="20" title=""/>
			
			<h:panelGrid columns="2" width="100%">
				<t:outputText value="#{msg.status_label_new_msg}" />
				<t:inputTextarea value="#{customerPortal.passengerBean.currentMessage}" />
			</h:panelGrid>
				
			<rich:spacer width="100%" height="20" title=""/>
			
			<p class="contentSubHeader"><t:outputText value="#{msg.status_title_files}" />	</p>
			
			<rich:spacer width="100%" height="10" title=""/>
			
			<t:outputText value="#{msg.status_text_file_desc}" />
			
			<rich:spacer width="100%" height="20" title=""/>
				
			<t:outputText value="#{msg.status_text_past_files}" />	
			
			<rich:spacer width="100%" height="10" title=""/>
			
			<a4j:outputPanel id="filePanel" ajaxRendered="true">
				<t:dataTable width="80%" align="center" id="fileTable" 
						value="#{customerPortal.fileDataModelList}" var="file">
					<f:facet name="spacer">
          				<f:verbatim>&amp;#160;</f:verbatim>
    				</f:facet>	
					<h:column rendered="#{file.publish}">
				        <f:facet name="header">
				            <h:outputText value="#{msg.status_column_filename}"/>
				        </f:facet>
						<h:outputLink value="/customer-portal/showImage?ID=#{file.path}/#{file.name}" rendered="#{file.downloadable}" target="blank">
							<h:outputText value="#{file.name}" />
						</h:outputLink>
						<h:outputText value="#{file.name}" rendered="#{!file.downloadable}"/>
					</h:column>
					<h:column rendered="#{file.publish}">
				        <f:facet name="header">
				            <h:outputText value="#{msg.status_column_dateup}"/>
				        </f:facet>
						<h:outputText value="#{file.dispDateUploaded}" rendered="#{!file.downloadable}"/>
					</h:column>
					<h:column rendered="#{file.publish}">
				        <f:facet name="header">
				            <h:outputText value="#{msg.status_column_action}"/>
				        </f:facet>
						<a4j:commandButton  value="#{msg.status_button_remove}" rendered="#{file.new}"
								reRender="filePanel" limitToList="true" immediate="true" styleClass="submitButtonOrange" 
								actionListener="#{customerPortal.removeFileListener}"/>
					</h:column>
					
				</t:dataTable>
				
			</a4j:outputPanel>
			
			<rich:spacer width="100%" height="20" title=""/>
				
			<h:panelGrid columns="3" width="100%">
				<t:outputText value="#{msg.status_label_new_file}" />
				<t:inputFileUpload id="fileupload" value="#{customerPortal.upFile}" size="60" />
				<h:panelGroup>
					<h:commandButton value="#{msg.status_button_add}" 
						 	action="#{customerPortal.upload}" styleClass="submitButtonOrange" >
						 	<a4j:support event="onclick" reRender="filePanel" limitToList="true"/>
					</h:commandButton>
				</h:panelGroup>
			</h:panelGrid>
				
			<rich:spacer width="100%" height="30" title=""/>

			<h:panelGroup>
				<h:commandButton value="#{msg.status_button_back}" action="login?faces-redirect=true" styleClass="submitButtonWhite" >
				</h:commandButton>
				<h:commandButton value="#{msg.status_button_send}" action="#{customerPortal.sendToNT}" styleClass="submitButtonOrange" >
				</h:commandButton>
			</h:panelGroup>
				
			<rich:spacer width="100%" height="30" title=""/>

		</h:form>
	</ui:define>
</ui:composition>
