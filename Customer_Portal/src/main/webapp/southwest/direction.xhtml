<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"
	template="../layout/southwest_template.xhtml">


	<ui:define name="title">Southwest Airlines: Customer Portal</ui:define>

	<ui:define name="body">
		<h:form id="appForm" enctype="multipart/form-data">

			<p class="contentHeader">Bag tracking summary</p>
			
			<rich:spacer width="100%" height="20" title=""/>
			
			<rich:messages id="reportMsg" errorClass="errormsg" infoClass="infomsg" layout="list"/>
			
			<rich:spacer width="100%" height="10" title=""/>

			<p class="contentSubHeader"><h:outputText id="dirpass" styleClass="bodycopy" value="MSG BUNDLE HERE" /></p>
			
			<rich:spacer width="100%" height="30" title=""/>

			<h:panelGrid columns="2" width="100%">
				<p>File number:</p>
				<span><h:outputText
					value="#{customerPortal.passengerData.incidentID}"
					styleClass="formLabel" /></span>
	
				<p>Date file opened:</p>
				<span><h:outputText
					value="#{customerPortal.passengerData.dispcreatetime}"
					styleClass="formLabel" /></span>
	
				<p>File status:</p>
				<span><h:outputText
					value="#{customerPortal.passengerData.incidentStatus}"
					styleClass="formLabel" /></span>

			<a4j:repeat value="#{customerPortal.passengerData.passengersArray}"
				var="passenger" rowKeyVar="rowIndex">
				<h3><h:outputText value="#{passenger.firstname} "
					styleClass="formLabel" />&nbsp;&nbsp;<h:outputText
					value=" #{passenger.lastname}" styleClass="formLabel" /></h3>

				<p>Home phone:</p>
				<span><h:outputText value="#{passenger.homephone}"
					styleClass="formLabel" /></span>

				<p>Business phone:</p>
				<span><h:outputText value="#{passenger.workphone}"
					styleClass="formLabel" /></span>

				<p>Mobile phone:</p>
				<span><h:outputText value="#{passenger.mobile}"
					styleClass="formLabel" /></span>

				<p>Email:</p>
				<span><h:outputText value="#{passenger.email}"
					styleClass="formLabel" /></span>

			</a4j:repeat>


			<p>Comments:</p>
			<span><h:outputText
				value="#{customerPortal.passengerData.comments}"
				styleClass="formLabel" /></span>
             
			</h:panelGrid>    

			<rich:spacer width="100%" height="30" title=""/>

			<p class="contentSubHeader">Baggage information</p>
				
			<a4j:repeat value="#{customerPortal.passengerBean.pvItems}" var="item" rowKeyVar="rowIndex">
				<b><h:outputText value="Bag ##{rowIndex + 1}" styleClass="formLabel" /></b><br/>
				<table>
				<h:panelGroup rendered="#{item.claimchecknumavail}">
					<tr><td><p>Bag Tag:</p></td>
					<td><span><h:outputText value="#{item.claimchecknum}"
						styleClass="formLabel" /></span></td>
					</tr>
				</h:panelGroup>
			
			
				<tr><td><p>Status:</p></td>
				<td><span><h:outputText value="#{item.bagstatus}"
					styleClass="formLabel" /></span>
				</td></tr></table>
			</a4j:repeat>
			
			<rich:spacer width="100%" height="20" title=""/>
			
			<p class="contentSubHeader"><t:outputText value="MESSAGES MSG" /></p>
			
			<rich:spacer width="100%" height="10" title=""/>
				
			<p class="contentSubHeader"><t:outputText value="PAST MESSAGES MSG" /></p>
			
			<rich:spacer width="100%" height="10" title=""/>
			
			<a4j:outputPanel id="messagePanel" ajaxRendered="true">
				<t:dataTable width="80%" align="center" id="messageTable" value="#{customerPortal.passengerBean.messages}" var="message">
						
					<h:column rendered="#{message.publish}">
						<h:outputText value="#{message.message}" style="padding:10px;"/>
					</h:column>
					<h:column rendered="#{message.publish}">
						<rich:spacer width="50" title=""/>
					</h:column>
					<h:column rendered="#{message.publish}">
						<h:outputText value="#{message.username}" style="padding:10px;"/>
					</h:column>
					
				</t:dataTable>
				
			</a4j:outputPanel>
			
			<rich:spacer width="100%" height="20" title=""/>
			
			<h:panelGrid columns="2" width="100%">
				<t:outputText value="MESSAGE INSTR MSG" styleClass="bodycopy"/>
				<t:inputTextarea value="#{customerPortal.passengerBean.currentMessage}" />
			</h:panelGrid>
				
			<rich:spacer width="100%" height="20" title=""/>
			
			<p class="contentSubHeader"><t:outputText value="FILE MSG" />	</p>
			
			<rich:spacer width="100%" height="10" title=""/>
			
			<t:outputText value="FILE INSTR MSG" />
			
			<rich:spacer width="100%" height="20" title=""/>
				
			<t:outputText value="RECPTS MSG" />	
			
			<rich:spacer width="100%" height="10" title=""/>
			
			<a4j:outputPanel id="filePanel" ajaxRendered="true">
				<t:dataTable width="80%" align="center" id="fileTable" 
						value="#{customerPortal.fileDataModelList}" var="file">
						
					<h:column rendered="#{file.publish}">
						<h:outputLink value="/customer-portal/showImage?ID=#{file.path}/#{file.name}" rendered="#{file.downloadable}" target="blank">
							<h:outputText value="#{file.name}" styleClass="formLabel" style="padding:10px;"/>
						</h:outputLink>
						<h:outputText value="#{file.name}" styleClass="formLabel" style="padding:10px;" rendered="#{!file.downloadable}"/>
					</h:column>
					<h:column rendered="#{file.publish}">
						<rich:spacer width="50" title=""/>
					</h:column>
					<h:column rendered="#{file.publish}">
						<a4j:commandButton  value="REMOVE MSG" rendered="#{file.new}"
								reRender="filePanel" limitToList="true" immediate="true" styleClass="submitButtonOrange" 
								actionListener="#{customerPortal.removeFileListener}"/>
					</h:column>
					
				</t:dataTable>
				
			</a4j:outputPanel>
			
			<rich:spacer width="100%" height="20" title=""/>
				
			<h:panelGrid columns="3" width="100%">
				<t:outputText value="FILE" styleClass="formLabel"/>
				<t:inputFileUpload id="fileupload" value="#{customerPortal.upFile}" size="60" />
				<h:panelGroup>
					<h:commandButton value="ADD MSG" 
						 	action="#{customerPortal.upload}" styleClass="submitButtonOrange" >
						 	<a4j:support event="onclick" reRender="filePanel" limitToList="true"/>
					</h:commandButton>
				</h:panelGroup>
			</h:panelGrid>
			
			<rich:spacer width="100%" height="20" title=""/>
			
			<h:outputLink value="/customer-portal/showImage?ID=swa_faq.pdf" target="blank" >
				<h:outputText value="FAQ DL" styleClass="formLabel" style="padding:10px;"/>
			</h:outputLink>
			
			<rich:spacer width="100%" height="20" title=""/>
			
			<h:outputLink value="/customer-portal/showImage?ID=swa_claim_form.pdf" target="blank" >
				<h:outputText value="CLAIM DL" styleClass="formLabel" style="padding:10px;"/>
			</h:outputLink>
				
			<rich:spacer width="100%" height="30" title=""/>

			<h:panelGroup>
				<h:commandButton value="BACK MSG" action="login?faces-redirect=true" styleClass="submitButtonWhite" >
				</h:commandButton>
				<h:commandButton value="SEND MSG" action="#{customerPortal.sendToNT}" styleClass="submitButtonOrange" >
				</h:commandButton>
			</h:panelGroup>
				
			<rich:spacer width="100%" height="30" title=""/>

		</h:form>
	</ui:define>
</ui:composition>
